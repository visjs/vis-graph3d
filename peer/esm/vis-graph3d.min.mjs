/**
 * vis-graph3d
 * https://visjs.github.io/vis-graph3d/
 *
 * Create interactive, animated 3d graphs. Surfaces, lines, dots and block styling out of the box.
 *
 * @version 0.0.0-no-version
 * @date    2025-07-16T07:38:47.395Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */
import{DataView as t,DataSet as e}from"vis-data/peer/esm/vis-data.js";var n,i,r,o,a,s,c,u,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function f(){return i?n:(i=1,n=function(t){try{return!!t()}catch(t){return!0}})}function p(){return o?r:(o=1,r=!f()(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))}function d(){if(s)return a;s=1;var t=p(),e=Function.prototype,n=e.call,i=t&&e.bind.bind(n,n);return a=t?i:function(t){return function(){return n.apply(t,arguments)}},a}function v(){return u?c:(u=1,c=d()({}.isPrototypeOf))}var m,y,g,b,x,w,_,T,S,L,C={};function E(){if(y)return m;y=1;var t=function(t){return t&&t.Math===Math&&t};return m=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof l&&l)||t("object"==typeof m&&m)||function(){return this}()||Function("return this")()}function A(){if(b)return g;b=1;var t=p(),e=Function.prototype,n=e.apply,i=e.call;return g="object"==typeof Reflect&&Reflect.apply||(t?i.bind(n):function(){return i.apply(n,arguments)}),g}function M(){if(w)return x;w=1;var t=d(),e=t({}.toString),n=t("".slice);return x=function(t){return n(e(t),8,-1)}}function P(){if(T)return _;T=1;var t=M(),e=d();return _=function(n){if("Function"===t(n))return e(n)}}function O(){if(L)return S;L=1;var t="object"==typeof document&&document.all;return S=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(t){return"function"==typeof t}}var R,D,z,k,I={};function j(){return D?R:(D=1,R=!f()(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function B(){if(k)return z;k=1;var t=p(),e=Function.prototype.call;return z=t?e.bind(e):function(){return e.apply(e,arguments)},z}var F,W,N,Y,G,X,V,U,Z,H,q,$,Q,K,J,tt,et,nt,it,rt,ot,at,st,ct,ut,lt,ht,ft,pt,dt,vt,mt,yt,gt,bt,xt={};function wt(){if(F)return xt;F=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);return xt.f=n?function(t){var n=e(this,t);return!!n&&n.enumerable}:t,xt}function _t(){return N?W:(N=1,W=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}})}function Tt(){if(G)return Y;G=1;var t=d(),e=f(),n=M(),i=Object,r=t("".split);return Y=e(function(){return!i("z").propertyIsEnumerable(0)})?function(t){return"String"===n(t)?r(t,""):i(t)}:i}function St(){return V?X:(V=1,X=function(t){return null==t})}function Lt(){if(Z)return U;Z=1;var t=St(),e=TypeError;return U=function(n){if(t(n))throw new e("Can't call method on "+n);return n}}function Ct(){if(q)return H;q=1;var t=Tt(),e=Lt();return H=function(n){return t(e(n))}}function Et(){if(Q)return $;Q=1;var t=O();return $=function(e){return"object"==typeof e?null!==e:t(e)}}function At(){return J?K:(J=1,K={})}function Mt(){if(et)return tt;et=1;var t=At(),e=E(),n=O(),i=function(t){return n(t)?t:void 0};return tt=function(n,r){return arguments.length<2?i(t[n])||i(e[n]):t[n]&&t[n][r]||e[n]&&e[n][r]},tt}function Pt(){if(it)return nt;it=1;var t=E().navigator,e=t&&t.userAgent;return nt=e?String(e):""}function Ot(){if(ot)return rt;ot=1;var t,e,n=E(),i=Pt(),r=n.process,o=n.Deno,a=r&&r.versions||o&&o.version,s=a&&a.v8;return s&&(e=(t=s.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!e&&i&&(!(t=i.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=i.match(/Chrome\/(\d+)/))&&(e=+t[1]),rt=e}function Rt(){if(st)return at;st=1;var t=Ot(),e=f(),n=E().String;return at=!!Object.getOwnPropertySymbols&&!e(function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&t&&t<41})}function Dt(){return ut?ct:(ut=1,ct=Rt()&&!Symbol.sham&&"symbol"==typeof Symbol.iterator)}function zt(){if(ht)return lt;ht=1;var t=Mt(),e=O(),n=v(),i=Object;return lt=Dt()?function(t){return"symbol"==typeof t}:function(r){var o=t("Symbol");return e(o)&&n(o.prototype,i(r))}}function kt(){if(pt)return ft;pt=1;var t=String;return ft=function(e){try{return t(e)}catch(t){return"Object"}}}function It(){if(vt)return dt;vt=1;var t=O(),e=kt(),n=TypeError;return dt=function(i){if(t(i))return i;throw new n(e(i)+" is not a function")}}function jt(){if(yt)return mt;yt=1;var t=It(),e=St();return mt=function(n,i){var r=n[i];return e(r)?void 0:t(r)}}function Bt(){if(bt)return gt;bt=1;var t=B(),e=O(),n=Et(),i=TypeError;return gt=function(r,o){var a,s;if("string"===o&&e(a=r.toString)&&!n(s=t(a,r)))return s;if(e(a=r.valueOf)&&!n(s=t(a,r)))return s;if("string"!==o&&e(a=r.toString)&&!n(s=t(a,r)))return s;throw new i("Can't convert object to primitive value")}}var Ft,Wt,Nt,Yt,Gt,Xt,Vt,Ut,Zt,Ht,qt,$t,Qt,Kt,Jt,te,ee,ne,ie,re,oe,ae,se,ce,ue,le,he,fe,pe={exports:{}};function de(){return Wt?Ft:(Wt=1,Ft=!0)}function ve(){if(Yt)return Nt;Yt=1;var t=E(),e=Object.defineProperty;return Nt=function(n,i){try{e(t,n,{value:i,configurable:!0,writable:!0})}catch(e){t[n]=i}return i}}function me(){if(Gt)return pe.exports;Gt=1;var t=de(),e=E(),n=ve(),i="__core-js_shared__",r=pe.exports=e[i]||n(i,{});return(r.versions||(r.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),pe.exports}function ye(){if(Vt)return Xt;Vt=1;var t=me();return Xt=function(e,n){return t[e]||(t[e]=n||{})}}function ge(){if(Zt)return Ut;Zt=1;var t=Lt(),e=Object;return Ut=function(n){return e(t(n))}}function be(){if(qt)return Ht;qt=1;var t=d(),e=ge(),n=t({}.hasOwnProperty);return Ht=Object.hasOwn||function(t,i){return n(e(t),i)}}function xe(){if(Qt)return $t;Qt=1;var t=d(),e=0,n=Math.random(),i=t(1.1.toString);return $t=function(t){return"Symbol("+(void 0===t?"":t)+")_"+i(++e+n,36)}}function we(){if(Jt)return Kt;Jt=1;var t=E(),e=ye(),n=be(),i=xe(),r=Rt(),o=Dt(),a=t.Symbol,s=e("wks"),c=o?a.for||a:a&&a.withoutSetter||i;return Kt=function(t){return n(s,t)||(s[t]=r&&n(a,t)?a[t]:c("Symbol."+t)),s[t]}}function _e(){if(ee)return te;ee=1;var t=B(),e=Et(),n=zt(),i=jt(),r=Bt(),o=TypeError,a=we()("toPrimitive");return te=function(s,c){if(!e(s)||n(s))return s;var u,l=i(s,a);if(l){if(void 0===c&&(c="default"),u=t(l,s,c),!e(u)||n(u))return u;throw new o("Can't convert object to primitive value")}return void 0===c&&(c="number"),r(s,c)}}function Te(){if(ie)return ne;ie=1;var t=_e(),e=zt();return ne=function(n){var i=t(n,"string");return e(i)?i:i+""}}function Se(){if(oe)return re;oe=1;var t=E(),e=Et(),n=t.document,i=e(n)&&e(n.createElement);return re=function(t){return i?n.createElement(t):{}}}function Le(){if(se)return ae;se=1;var t=j(),e=f(),n=Se();return ae=!t&&!e(function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a})}function Ce(){if(ce)return I;ce=1;var t=j(),e=B(),n=wt(),i=_t(),r=Ct(),o=Te(),a=be(),s=Le(),c=Object.getOwnPropertyDescriptor;return I.f=t?c:function(t,u){if(t=r(t),u=o(u),s)try{return c(t,u)}catch(t){}if(a(t,u))return i(!e(n.f,t,u),t[u])},I}function Ee(){if(le)return ue;le=1;var t=f(),e=O(),n=/#|\.prototype\./,i=function(n,i){var c=o[r(n)];return c===s||c!==a&&(e(i)?t(i):!!i)},r=i.normalize=function(t){return String(t).replace(n,".").toLowerCase()},o=i.data={},a=i.NATIVE="N",s=i.POLYFILL="P";return ue=i}function Ae(){if(fe)return he;fe=1;var t=P(),e=It(),n=p(),i=t(t.bind);return he=function(t,r){return e(t),void 0===r?t:n?i(t,r):function(){return t.apply(r,arguments)}},he}var Me,Pe,Oe,Re,De,ze,ke,Ie,je,Be,Fe,We,Ne,Ye,Ge,Xe,Ve,Ue,Ze,He,qe,$e,Qe,Ke,Je,tn,en,nn,rn,on,an,sn,cn,un,ln,hn,fn,pn,dn,vn,mn,yn,gn,bn,xn,wn,_n,Tn,Sn={};function Ln(){return Pe?Me:(Pe=1,Me=j()&&f()(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}))}function Cn(){if(Re)return Oe;Re=1;var t=Et(),e=String,n=TypeError;return Oe=function(i){if(t(i))return i;throw new n(e(i)+" is not an object")}}function En(){if(De)return Sn;De=1;var t=j(),e=Le(),n=Ln(),i=Cn(),r=Te(),o=TypeError,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c="enumerable",u="configurable",l="writable";return Sn.f=t?n?function(t,e,n){if(i(t),e=r(e),i(n),"function"==typeof t&&"prototype"===e&&"value"in n&&l in n&&!n[l]){var o=s(t,e);o&&o[l]&&(t[e]=n.value,n={configurable:u in n?n[u]:o[u],enumerable:c in n?n[c]:o[c],writable:!1})}return a(t,e,n)}:a:function(t,n,s){if(i(t),n=r(n),i(s),e)try{return a(t,n,s)}catch(t){}if("get"in s||"set"in s)throw new o("Accessors not supported");return"value"in s&&(t[n]=s.value),t},Sn}function An(){if(ke)return ze;ke=1;var t=j(),e=En(),n=_t();return ze=t?function(t,i,r){return e.f(t,i,n(1,r))}:function(t,e,n){return t[e]=n,t},ze}function Mn(){if(je)return Ie;je=1;var t=E(),e=A(),n=P(),i=O(),r=Ce().f,o=Ee(),a=At(),s=Ae(),c=An(),u=be(),l=function(t){var n=function(i,r,o){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,r)}return new t(i,r,o)}return e(t,this,arguments)};return n.prototype=t.prototype,n};return Ie=function(e,h){var f,p,d,v,m,y,g,b,x,w=e.target,_=e.global,T=e.stat,S=e.proto,L=_?t:T?t[w]:t[w]&&t[w].prototype,C=_?a:a[w]||c(a,w,{})[w],E=C.prototype;for(v in h)p=!(f=o(_?v:w+(T?".":"#")+v,e.forced))&&L&&u(L,v),y=C[v],p&&(g=e.dontCallGetSet?(x=r(L,v))&&x.value:L[v]),m=p&&g?g:h[v],(f||S||typeof y!=typeof m)&&(b=e.bind&&p?s(m,t):e.wrap&&p?l(m):S&&i(m)?n(m):m,(e.sham||m&&m.sham||y&&y.sham)&&c(b,"sham",!0),c(C,v,b),S&&(u(a,d=w+"Prototype")||c(a,d,{}),c(a[d],v,m),e.real&&E&&(f||!E[v])&&c(E,v,m)))}}function Pn(){if(Fe)return Be;Fe=1;var t=Math.ceil,e=Math.floor;return Be=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)}}function On(){if(Ne)return We;Ne=1;var t=Pn();return We=function(e){var n=+e;return n!=n||0===n?0:t(n)},We}function Rn(){if(Ge)return Ye;Ge=1;var t=On(),e=Math.min;return Ye=function(n){var i=t(n);return i>0?e(i,9007199254740991):0}}function Dn(){if(Ve)return Xe;Ve=1;var t=Rn();return Xe=function(e){return t(e.length)}}function zn(){if(Ze)return Ue;Ze=1;var t=kt(),e=TypeError;return Ue=function(n,i){if(!delete n[i])throw new e("Cannot delete property "+t(i)+" of "+t(n))}}function kn(){if(qe)return He;qe=1;var t={};return t[we()("toStringTag")]="z",He="[object z]"===String(t)}function In(){if(Qe)return $e;Qe=1;var t=kn(),e=O(),n=M(),i=we()("toStringTag"),r=Object,o="Arguments"===n(function(){return arguments}());return $e=t?n:function(t){var a,s,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=function(t,e){try{return t[e]}catch(t){}}(a=r(t),i))?s:o?n(a):"Object"===(c=n(a))&&e(a.callee)?"Arguments":c}}function jn(){if(Je)return Ke;Je=1;var t=In(),e=String;return Ke=function(n){if("Symbol"===t(n))throw new TypeError("Cannot convert a Symbol value to a string");return e(n)}}function Bn(){return en?tn:(en=1,tn=d()([].slice))}function Fn(){if(rn)return nn;rn=1;var t=Bn(),e=Math.floor,n=function(i,r){var o=i.length;if(o<8)for(var a,s,c=1;c<o;){for(s=c,a=i[c];s&&r(i[s-1],a)>0;)i[s]=i[--s];s!==c++&&(i[s]=a)}else for(var u=e(o/2),l=n(t(i,0,u),r),h=n(t(i,u),r),f=l.length,p=h.length,d=0,v=0;d<f||v<p;)i[d+v]=d<f&&v<p?r(l[d],h[v])<=0?l[d++]:h[v++]:d<f?l[d++]:h[v++];return i};return nn=n}function Wn(){if(an)return on;an=1;var t=f();return on=function(e,n){var i=[][e];return!!i&&t(function(){i.call(null,n||function(){return 1},1)})}}function Nn(){if(cn)return sn;cn=1;var t=Pt().match(/firefox\/(\d+)/i);return sn=!!t&&+t[1]}function Yn(){return ln?un:(ln=1,un=/MSIE|Trident/.test(Pt()))}function Gn(){if(fn)return hn;fn=1;var t=Pt().match(/AppleWebKit\/(\d+)\./);return hn=!!t&&+t[1]}function Xn(){if(pn)return C;pn=1;var t=Mn(),e=d(),n=It(),i=ge(),r=Dn(),o=zn(),a=jn(),s=f(),c=Fn(),u=Wn(),l=Nn(),h=Yn(),p=Ot(),v=Gn(),m=[],y=e(m.sort),g=e(m.push),b=s(function(){m.sort(void 0)}),x=s(function(){m.sort(null)}),w=u("sort"),_=!s(function(){if(p)return p<70;if(!(l&&l>3)){if(h)return!0;if(v)return v<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)m.push({k:e+i,v:n})}for(m.sort(function(t,e){return e.v-t.v}),i=0;i<m.length;i++)e=m[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}});return t({target:"Array",proto:!0,forced:b||!x||!w||!_},{sort:function(t){void 0!==t&&n(t);var e=i(this);if(_)return void 0===t?y(e):y(e,t);var s,u,l=[],h=r(e);for(u=0;u<h;u++)u in e&&g(l,e[u]);for(c(l,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:a(e)>a(n)?1:-1}}(t)),s=r(l),u=0;u<s;)e[u]=l[u++];for(;u<h;)o(e,u++);return e}}),C}function Vn(){if(vn)return dn;vn=1;var t=E(),e=At();return dn=function(n,i){var r=e[n+"Prototype"],o=r&&r[i];if(o)return o;var a=t[n],s=a&&a.prototype;return s&&s[i]}}function Un(){return yn?mn:(yn=1,Xn(),mn=Vn()("Array","sort"))}function Zn(){if(bn)return gn;bn=1;var t=v(),e=Un(),n=Array.prototype;return gn=function(i){var r=i.sort;return i===n||t(n,i)&&r===n.sort?e:r}}function Hn(){return wn?xn:(wn=1,xn=Zn())}var qn,$n,Qn,Kn,Jn,ti,ei,ni,ii,ri,oi,ai,si,ci=h(Tn?_n:(Tn=1,_n=Hn())),ui={};function li(){if($n)return qn;$n=1;var t=On(),e=Math.max,n=Math.min;return qn=function(i,r){var o=t(i);return o<0?e(o+r,0):n(o,r)}}function hi(){if(Kn)return Qn;Kn=1;var t=Ct(),e=li(),n=Dn(),i=function(i){return function(r,o,a){var s=t(r),c=n(s);if(0===c)return!i&&-1;var u,l=e(a,c);if(i&&o!=o){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((i||l in s)&&s[l]===o)return i||l||0;return!i&&-1}};return Qn={includes:i(!0),indexOf:i(!1)}}function fi(){return ei?ti:(ei=1,function(){if(Jn)return ui;Jn=1;var t=Mn(),e=P(),n=hi().indexOf,i=Wn(),r=e([].indexOf),o=!!r&&1/r([1],1,-0)<0;t({target:"Array",proto:!0,forced:o||!i("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return o?r(this,t,e)||0:n(this,t,e)}})}(),ti=Vn()("Array","indexOf"))}function pi(){if(ii)return ni;ii=1;var t=v(),e=fi(),n=Array.prototype;return ni=function(i){var r=i.indexOf;return i===n||t(n,i)&&r===n.indexOf?e:r}}function di(){return oi?ri:(oi=1,ri=pi())}var vi,mi,yi,gi,bi,xi,wi,_i,Ti,Si,Li,Ci,Ei,Ai,Mi,Pi,Oi,Ri,Di,zi,ki,Ii,ji,Bi=h(si?ai:(si=1,ai=di())),Fi={};function Wi(){if(mi)return vi;mi=1;var t=M();return vi=Array.isArray||function(e){return"Array"===t(e)}}function Ni(){if(gi)return yi;gi=1;var t=d(),e=O(),n=me(),i=t(Function.toString);return e(n.inspectSource)||(n.inspectSource=function(t){return i(t)}),yi=n.inspectSource}function Yi(){if(xi)return bi;xi=1;var t=d(),e=f(),n=O(),i=In(),r=Mt(),o=Ni(),a=function(){},s=r("Reflect","construct"),c=/^\s*(?:class|function)\b/,u=t(c.exec),l=!c.test(a),h=function(t){if(!n(t))return!1;try{return s(a,[],t),!0}catch(t){return!1}},p=function(t){if(!n(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!u(c,o(t))}catch(t){return!0}};return p.sham=!0,bi=!s||e(function(){var t;return h(h.call)||!h(Object)||!h(function(){t=!0})||t})?p:h}function Gi(){if(_i)return wi;_i=1;var t=Wi(),e=Yi(),n=Et(),i=we()("species"),r=Array;return wi=function(o){var a;return t(o)&&(a=o.constructor,(e(a)&&(a===r||t(a.prototype))||n(a)&&null===(a=a[i]))&&(a=void 0)),void 0===a?r:a}}function Xi(){if(Si)return Ti;Si=1;var t=Gi();return Ti=function(e,n){return new(t(e))(0===n?0:n)}}function Vi(){if(Ci)return Li;Ci=1;var t=Ae(),e=d(),n=Tt(),i=ge(),r=Dn(),o=Xi(),a=e([].push),s=function(e){var s=1===e,c=2===e,u=3===e,l=4===e,h=6===e,f=7===e,p=5===e||h;return function(d,v,m,y){for(var g,b,x=i(d),w=n(x),_=r(w),T=t(v,m),S=0,L=y||o,C=s?L(d,_):c||f?L(d,0):void 0;_>S;S++)if((p||S in w)&&(b=T(g=w[S],S,x),e))if(s)C[S]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:a(C,g)}else switch(e){case 4:return!1;case 7:a(C,g)}return h?-1:u||l?l:C}};return Li={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}}function Ui(){if(Ai)return Ei;Ai=1;var t=f(),e=we(),n=Ot(),i=e("species");return Ei=function(e){return n>=51||!t(function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Ei}function Zi(){return Oi?Pi:(Oi=1,function(){if(Mi)return Fi;Mi=1;var t=Mn(),e=Vi().filter;t({target:"Array",proto:!0,forced:!Ui()("filter")},{filter:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})}(),Pi=Vn()("Array","filter"))}function Hi(){if(Di)return Ri;Di=1;var t=v(),e=Zi(),n=Array.prototype;return Ri=function(i){var r=i.filter;return i===n||t(n,i)&&r===n.filter?e:r}}function qi(){return ki?zi:(ki=1,zi=Hi())}var $i,Qi,Ki,Ji,tr,er,nr,ir,rr,or,ar,sr,cr,ur=h(ji?Ii:(ji=1,Ii=qi())),lr={};function hr(){return Qi?$i:(Qi=1,$i="\t\n\v\f\r                　\u2028\u2029\ufeff")}function fr(){if(Ji)return Ki;Ji=1;var t=d(),e=Lt(),n=jn(),i=hr(),r=t("".replace),o=RegExp("^["+i+"]+"),a=RegExp("(^|[^"+i+"])["+i+"]+$"),s=function(t){return function(i){var s=n(e(i));return 1&t&&(s=r(s,o,"")),2&t&&(s=r(s,a,"$1")),s}};return Ki={start:s(1),end:s(2),trim:s(3)}}function pr(){if(er)return tr;er=1;var t=E(),e=f(),n=d(),i=jn(),r=fr().trim,o=hr(),a=n("".charAt),s=t.parseFloat,c=t.Symbol,u=c&&c.iterator,l=1/s(o+"-0")!=-1/0||u&&!e(function(){s(Object(u))});return tr=l?function(t){var e=r(i(t)),n=s(e);return 0===n&&"-"===a(e,0)?-0:n}:s,tr}function dr(){return rr?ir:(rr=1,function(){if(nr)return lr;nr=1;var t=Mn(),e=pr();t({global:!0,forced:parseFloat!==e},{parseFloat:e})}(),ir=At().parseFloat)}function vr(){return ar?or:(ar=1,or=dr())}var mr,yr,gr,br,xr,wr,_r,Tr,Sr,Lr,Cr,Er,Ar,Mr=h(cr?sr:(cr=1,sr=vr())),Pr={};function Or(){if(yr)return mr;yr=1;var t=ge(),e=li(),n=Dn();return mr=function(i){for(var r=t(this),o=n(r),a=arguments.length,s=e(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,u=void 0===c?o:e(c,o);u>s;)r[s++]=i;return r},mr}function Rr(){return br?gr:(br=1,gr=function(){})}function Dr(){return _r?wr:(_r=1,function(){if(xr)return Pr;xr=1;var t=Mn(),e=Or(),n=Rr();t({target:"Array",proto:!0},{fill:e}),n("fill")}(),wr=Vn()("Array","fill"))}function zr(){if(Sr)return Tr;Sr=1;var t=v(),e=Dr(),n=Array.prototype;return Tr=function(i){var r=i.fill;return i===n||t(n,i)&&r===n.fill?e:r}}function kr(){return Cr?Lr:(Cr=1,Lr=zr())}var Ir,jr,Br,Fr,Wr,Nr,Yr,Gr,Xr,Vr,Ur,Zr,Hr=h(Ar?Er:(Ar=1,Er=kr())),qr={};function $r(){return jr?Ir:(jr=1,Ir={})}function Qr(){if(Fr)return Br;Fr=1;var t=E(),e=O(),n=t.WeakMap;return Br=e(n)&&/native code/.test(String(n))}function Kr(){if(Nr)return Wr;Nr=1;var t=ye(),e=xe(),n=t("keys");return Wr=function(t){return n[t]||(n[t]=e(t))}}function Jr(){return Gr?Yr:(Gr=1,Yr={})}function to(){if(Vr)return Xr;Vr=1;var t,e,n,i=Qr(),r=E(),o=Et(),a=An(),s=be(),c=me(),u=Kr(),l=Jr(),h="Object already initialized",f=r.TypeError,p=r.WeakMap;if(i||c.state){var d=c.state||(c.state=new p);d.get=d.get,d.has=d.has,d.set=d.set,t=function(t,e){if(d.has(t))throw new f(h);return e.facade=t,d.set(t,e),e},e=function(t){return d.get(t)||{}},n=function(t){return d.has(t)}}else{var v=u("state");l[v]=!0,t=function(t,e){if(s(t,v))throw new f(h);return e.facade=t,a(t,v,e),e},e=function(t){return s(t,v)?t[v]:{}},n=function(t){return s(t,v)}}return Xr={set:t,get:e,has:n,enforce:function(i){return n(i)?e(i):t(i,{})},getterFor:function(t){return function(n){var i;if(!o(n)||(i=e(n)).type!==t)throw new f("Incompatible receiver, "+t+" required");return i}}}}function eo(){if(Zr)return Ur;Zr=1;var t=j(),e=be(),n=Function.prototype,i=t&&Object.getOwnPropertyDescriptor,r=e(n,"name"),o=r&&"something"===function(){}.name,a=r&&(!t||t&&i(n,"name").configurable);return Ur={EXISTS:r,PROPER:o,CONFIGURABLE:a}}var no,io,ro,oo,ao,so,co,uo,lo,ho,fo,po,vo,mo,yo,go,bo,xo,wo,_o,To,So,Lo,Co,Eo,Ao,Mo,Po,Oo,Ro,Do,zo,ko,Io,jo,Bo,Fo,Wo,No,Yo,Go,Xo,Vo,Uo,Zo,Ho,qo,$o,Qo,Ko,Jo={};function ta(){if(io)return no;io=1;var t=d(),e=be(),n=Ct(),i=hi().indexOf,r=Jr(),o=t([].push);return no=function(t,a){var s,c=n(t),u=0,l=[];for(s in c)!e(r,s)&&e(c,s)&&o(l,s);for(;a.length>u;)e(c,s=a[u++])&&(~i(l,s)||o(l,s));return l},no}function ea(){return oo?ro:(oo=1,ro=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function na(){if(so)return ao;so=1;var t=ta(),e=ea();return ao=Object.keys||function(n){return t(n,e)}}function ia(){if(co)return Jo;co=1;var t=j(),e=Ln(),n=En(),i=Cn(),r=Ct(),o=na();return Jo.f=t&&!e?Object.defineProperties:function(t,e){i(t);for(var a,s=r(e),c=o(e),u=c.length,l=0;u>l;)n.f(t,a=c[l++],s[a]);return t},Jo}function ra(){return lo?uo:(lo=1,uo=Mt()("document","documentElement"))}function oa(){if(fo)return ho;fo=1;var t,e=Cn(),n=ia(),i=ea(),r=Jr(),o=ra(),a=Se(),s="prototype",c="script",u=Kr()("IE_PROTO"),l=function(){},h=function(t){return"<"+c+">"+t+"</"+c+">"},f=function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e},p=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var e,n,r;p="undefined"!=typeof document?document.domain&&t?f(t):(n=a("iframe"),r="java"+c+":",n.style.display="none",o.appendChild(n),n.src=String(r),(e=n.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):f(t);for(var u=i.length;u--;)delete p[s][i[u]];return p()};return r[u]=!0,ho=Object.create||function(t,i){var r;return null!==t?(l[s]=e(t),r=new l,l[s]=null,r[u]=t):r=p(),void 0===i?r:n.f(r,i)}}function aa(){return vo?po:(vo=1,po=!f()(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))}function sa(){if(yo)return mo;yo=1;var t=be(),e=O(),n=ge(),i=Kr(),r=aa(),o=i("IE_PROTO"),a=Object,s=a.prototype;return mo=r?a.getPrototypeOf:function(i){var r=n(i);if(t(r,o))return r[o];var c=r.constructor;return e(c)&&r instanceof c?c.prototype:r instanceof a?s:null},mo}function ca(){if(bo)return go;bo=1;var t=An();return go=function(e,n,i,r){return r&&r.enumerable?e[n]=i:t(e,n,i),e}}function ua(){if(wo)return xo;wo=1;var t,e,n,i=f(),r=O(),o=Et(),a=oa(),s=sa(),c=ca(),u=we(),l=de(),h=u("iterator"),p=!1;return[].keys&&("next"in(n=[].keys())?(e=s(s(n)))!==Object.prototype&&(t=e):p=!0),!o(t)||i(function(){var e={};return t[h].call(e)!==e})?t={}:l&&(t=a(t)),r(t[h])||c(t,h,function(){return this}),xo={IteratorPrototype:t,BUGGY_SAFARI_ITERATORS:p}}function la(){if(To)return _o;To=1;var t=kn(),e=In();return _o=t?{}.toString:function(){return"[object "+e(this)+"]"}}function ha(){if(Lo)return So;Lo=1;var t=kn(),e=En().f,n=An(),i=be(),r=la(),o=we()("toStringTag");return So=function(a,s,c,u){var l=c?a:a&&a.prototype;l&&(i(l,o)||e(l,o,{configurable:!0,value:s}),u&&!t&&n(l,"toString",r))}}function fa(){if(Eo)return Co;Eo=1;var t=ua().IteratorPrototype,e=oa(),n=_t(),i=ha(),r=$r(),o=function(){return this};return Co=function(a,s,c,u){var l=s+" Iterator";return a.prototype=e(t,{next:n(+!u,c)}),i(a,l,!1,!0),r[l]=o,a}}function pa(){if(Mo)return Ao;Mo=1;var t=d(),e=It();return Ao=function(n,i,r){try{return t(e(Object.getOwnPropertyDescriptor(n,i)[r]))}catch(t){}},Ao}function da(){if(Oo)return Po;Oo=1;var t=Et();return Po=function(e){return t(e)||null===e}}function va(){if(Do)return Ro;Do=1;var t=da(),e=String,n=TypeError;return Ro=function(i){if(t(i))return i;throw new n("Can't set "+e(i)+" as a prototype")}}function ma(){if(ko)return zo;ko=1;var t=pa(),e=Et(),n=Lt(),i=va();return zo=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,a={};try{(r=t(Object.prototype,"__proto__","set"))(a,[]),o=a instanceof Array}catch(t){}return function(t,a){return n(t),i(a),e(t)?(o?r(t,a):t.__proto__=a,t):t}}():void 0)}function ya(){if(jo)return Io;jo=1;var t=Mn(),e=B(),n=de(),i=eo(),r=O(),o=fa(),a=sa(),s=ma(),c=ha(),u=An(),l=ca(),h=we(),f=$r(),p=ua(),d=i.PROPER,v=i.CONFIGURABLE,m=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,g=h("iterator"),b="keys",x="values",w="entries",_=function(){return this};return Io=function(i,h,p,T,S,L,C){o(p,h,T);var E,A,M,P=function(t){if(t===S&&k)return k;if(!y&&t&&t in D)return D[t];switch(t){case b:case x:case w:return function(){return new p(this,t)}}return function(){return new p(this)}},O=h+" Iterator",R=!1,D=i.prototype,z=D[g]||D["@@iterator"]||S&&D[S],k=!y&&z||P(S),I="Array"===h&&D.entries||z;if(I&&(E=a(I.call(new i)))!==Object.prototype&&E.next&&(n||a(E)===m||(s?s(E,m):r(E[g])||l(E,g,_)),c(E,O,!0,!0),n&&(f[O]=_)),d&&S===x&&z&&z.name!==x&&(!n&&v?u(D,"name",x):(R=!0,k=function(){return e(z,this)})),S)if(A={values:P(x),keys:L?k:P(b),entries:P(w)},C)for(M in A)(y||R||!(M in D))&&l(D,M,A[M]);else t({target:h,proto:!0,forced:y||R},A);return n&&!C||D[g]===k||l(D,g,k,{name:S}),f[h]=k,A}}function ga(){return Fo?Bo:(Fo=1,Bo=function(t,e){return{value:t,done:e}})}function ba(){if(No)return Wo;No=1;var t=Ct(),e=Rr(),n=$r(),i=to(),r=En().f,o=ya(),a=ga(),s=de(),c=j(),u="Array Iterator",l=i.set,h=i.getterFor(u);Wo=o(Array,"Array",function(e,n){l(this,{type:u,target:t(e),index:0,kind:n})},function(){var t=h(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=null,a(void 0,!0);switch(t.kind){case"keys":return a(n,!1);case"values":return a(e[n],!1)}return a([n,e[n]],!1)},"values");var f=n.Arguments=n.Array;if(e("keys"),e("values"),e("entries"),!s&&c&&"values"!==f.name)try{r(f,"name",{value:"values"})}catch(t){}return Wo}function xa(){return Go?Yo:(Go=1,Yo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})}function wa(){return Uo?Vo:(Uo=1,ba(),Vo=Vn()("Array","values"))}function _a(){return Ho?Zo:(Ho=1,Zo=wa())}function Ta(){if($o)return qo;$o=1,function(){if(Xo)return qr;Xo=1,ba();var t=xa(),e=E(),n=ha(),i=$r();for(var r in t)n(e[r],r),i[r]=i.Array}();var t=In(),e=be(),n=v(),i=_a(),r=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return qo=function(a){var s=a.values;return a===r||n(r,a)&&s===r.values||e(o,t(a))?i:s}}var Sa,La,Ca,Ea,Aa,Ma,Pa,Oa,Ra,Da,za,ka=h(Ko?Qo:(Ko=1,Qo=Ta())),Ia={};function ja(){if(La)return Sa;La=1;var t=Vi().forEach,e=Wn()("forEach");return Sa=e?[].forEach:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)},Sa}function Ba(){return Aa?Ea:(Aa=1,function(){if(Ca)return Ia;Ca=1;var t=Mn(),e=ja();t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e})}(),Ea=Vn()("Array","forEach"))}function Fa(){return Pa?Ma:(Pa=1,Ma=Ba())}function Wa(){if(Ra)return Oa;Ra=1;var t=In(),e=be(),n=v(),i=Fa(),r=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return Oa=function(a){var s=a.forEach;return a===r||n(r,a)&&s===r.forEach||e(o,t(a))?i:s}}var Na,Ya,Ga,Xa,Va,Ua,Za,Ha=h(za?Da:(za=1,Da=Wa()));function qa(){return Ga?Ya:(Ga=1,Na||(Na=1,Mn()({target:"Array",stat:!0},{isArray:Wi()})),Ya=At().Array.isArray)}function $a(){return Va?Xa:(Va=1,Xa=qa())}var Qa,Ka,Ja,ts,es,ns,is,rs=h(Za?Ua:(Za=1,Ua=$a()));function os(){return Ja?Ka:(Ja=1,Qa||(Qa=1,Mn()({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})),Ka=At().Number.isNaN)}function as(){return es?ts:(es=1,ts=os())}var ss,cs,us,ls,hs,fs,ps,ds,vs,ms,ys,gs,bs,xs=h(is?ns:(is=1,ns=as())),ws={};function _s(){if(cs)return ss;cs=1;var t=TypeError;return ss=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}}function Ts(){if(ls)return us;ls=1;var t=j(),e=En(),n=_t();return us=function(i,r,o){t?e.f(i,r,n(0,o)):i[r]=o},us}function Ss(){return ps?fs:(ps=1,function(){if(hs)return ws;hs=1;var t=Mn(),e=f(),n=Wi(),i=Et(),r=ge(),o=Dn(),a=_s(),s=Ts(),c=Xi(),u=Ui(),l=we(),h=Ot(),p=l("isConcatSpreadable"),d=h>=51||!e(function(){var t=[];return t[p]=!1,t.concat()[0]!==t}),v=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)};t({target:"Array",proto:!0,arity:1,forced:!d||!u("concat")},{concat:function(t){var e,n,i,u,l,h=r(this),f=c(h,0),p=0;for(e=-1,i=arguments.length;e<i;e++)if(v(l=-1===e?h:arguments[e]))for(u=o(l),a(p+u),n=0;n<u;n++,p++)n in l&&s(f,p,l[n]);else a(p+1),s(f,p++,l);return f.length=p,f}})}(),fs=Vn()("Array","concat"))}function Ls(){if(vs)return ds;vs=1;var t=v(),e=Ss(),n=Array.prototype;return ds=function(i){var r=i.concat;return i===n||t(n,i)&&r===n.concat?e:r}}function Cs(){return ys?ms:(ys=1,ms=Ls())}var Es,As,Ms,Ps,Os,Rs,Ds,zs=h(bs?gs:(bs=1,gs=Cs())),ks={},Is={};function js(){if(As)return Es;As=1;var t=E(),e=Pt(),n=M(),i=function(t){return e.slice(0,t.length)===t};return Es=i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":t.Bun&&"string"==typeof Bun.version?"BUN":t.Deno&&"object"==typeof Deno.version?"DENO":"process"===n(t.process)?"NODE":t.window&&t.document?"BROWSER":"REST"}function Bs(){if(Ps)return Ms;Ps=1;var t=TypeError;return Ms=function(e,n){if(e<n)throw new t("Not enough arguments");return e}}function Fs(){if(Rs)return Os;Rs=1;var t,e=E(),n=A(),i=O(),r=js(),o=Pt(),a=Bn(),s=Bs(),c=e.Function,u=/MSIE .\./.test(o)||"BUN"===r&&((t=e.Bun.version.split(".")).length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2]));return Os=function(t,e){var r=e?2:1;return u?function(o,u){var l=s(arguments.length,1)>r,h=i(o)?o:c(o),f=l?a(arguments,r):[],p=l?function(){n(h,this,f)}:h;return e?t(p,u):t(p)}:t},Os}var Ws,Ns,Ys,Gs,Xs,Vs,Us={};function Zs(){return Ns||(Ns=1,function(){if(Ds)return Is;Ds=1;var t=Mn(),e=E(),n=Fs()(e.setInterval,!0);t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n})}(),function(){if(Ws)return Us;Ws=1;var t=Mn(),e=E(),n=Fs()(e.setTimeout,!0);t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n})}()),ks}function Hs(){return Gs?Ys:(Gs=1,Zs(),Ys=At().setTimeout)}var qs,$s,Qs,Ks,Js,tc,ec,nc,ic,rc,oc=h(Vs?Xs:(Vs=1,Xs=Hs())),ac={},sc={};function cc(){return qs||(qs=1,sc.f=Object.getOwnPropertySymbols),sc}function uc(){if(Qs)return $s;Qs=1;var t=j(),e=d(),n=B(),i=f(),r=na(),o=cc(),a=wt(),s=ge(),c=Tt(),u=Object.assign,l=Object.defineProperty,h=e([].concat);return $s=!u||i(function(){if(t&&1!==u({b:1},u(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},i=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(t){n[t]=t}),7!==u({},e)[i]||r(u({},n)).join("")!==o})?function(e,i){for(var u=s(e),l=arguments.length,f=1,p=o.f,d=a.f;l>f;)for(var v,m=c(arguments[f++]),y=p?h(r(m),p(m)):r(m),g=y.length,b=0;g>b;)v=y[b++],t&&!n(d,m,v)||(u[v]=m[v]);return u}:u,$s}function lc(){return tc?Js:(tc=1,function(){if(Ks)return ac;Ks=1;var t=Mn(),e=uc();t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e})}(),Js=At().Object.assign)}function hc(){return nc?ec:(nc=1,ec=lc())}var fc,pc=h(rc?ic:(rc=1,ic=hc())),dc={exports:{}};function vc(){return fc||(fc=1,function(t){function e(t){if(t)return function(t){return Object.assign(t,e.prototype),t._callbacks=new Map,t}(t);this._callbacks=new Map}e.prototype.on=function(t,e){const n=this._callbacks.get(t)??[];return n.push(e),this._callbacks.set(t,n),this},e.prototype.once=function(t,e){const n=(...i)=>{this.off(t,n),e.apply(this,i)};return n.fn=e,this.on(t,n),this},e.prototype.off=function(t,e){if(void 0===t&&void 0===e)return this._callbacks.clear(),this;if(void 0===e)return this._callbacks.delete(t),this;const n=this._callbacks.get(t);if(n){for(const[t,i]of n.entries())if(i===e||i.fn===e){n.splice(t,1);break}0===n.length?this._callbacks.delete(t):this._callbacks.set(t,n)}return this},e.prototype.emit=function(t,...e){const n=this._callbacks.get(t);if(n){const t=[...n];for(const n of t)n.apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks.get(t)??[]},e.prototype.listenerCount=function(t){if(t)return this.listeners(t).length;let e=0;for(const t of this._callbacks.values())e+=t.length;return e},e.prototype.hasListeners=function(t){return this.listenerCount(t)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(dc)),dc.exports}var mc=h(vc());
/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */
function yc(){return yc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yc.apply(this,arguments)}function gc(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function bc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var xc,wc="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign,_c=["","webkit","Moz","MS","ms","o"],Tc="undefined"==typeof document?{style:{}}:document.createElement("div"),Sc=Math.round,Lc=Math.abs,Cc=Date.now;function Ec(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<_c.length;){if((i=(n=_c[o])?n+r:e)in t)return i;o++}}xc="undefined"==typeof window?{}:window;var Ac=Ec(Tc.style,"touchAction"),Mc=void 0!==Ac;var Pc="compute",Oc="auto",Rc="manipulation",Dc="none",zc="pan-x",kc="pan-y",Ic=function(){if(!Mc)return!1;var t={},e=xc.CSS&&xc.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){return t[n]=!e||xc.CSS.supports("touch-action",n)}),t}(),jc="ontouchstart"in xc,Bc=void 0!==Ec(xc,"PointerEvent"),Fc=jc&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Wc="touch",Nc="mouse",Yc=16,Gc=24,Xc=["x","y"],Vc=["clientX","clientY"];function Uc(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function Zc(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function Hc(t,e){return t.indexOf(e)>-1}var qc=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===Pc&&(t=this.compute()),Mc&&this.manager.element.style&&Ic[t]&&(this.manager.element.style[Ac]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return Uc(this.manager.recognizers,function(e){Zc(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(Hc(t,Dc))return Dc;var e=Hc(t,zc),n=Hc(t,kc);return e&&n?Dc:e||n?e?zc:kc:Hc(t,Rc)?Rc:Oc}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=Hc(i,Dc)&&!Ic[Dc],o=Hc(i,kc)&&!Ic[kc],a=Hc(i,zc)&&!Ic[zc];if(r){var s=1===t.pointers.length,c=t.distance<2,u=t.deltaTime<250;if(s&&c&&u)return}if(!a||!o)return r||o&&6&n||a&&n&Gc?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function $c(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Qc(t){var e=t.length;if(1===e)return{x:Sc(t[0].clientX),y:Sc(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:Sc(n/e),y:Sc(i/e)}}function Kc(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:Sc(t.pointers[n].clientX),clientY:Sc(t.pointers[n].clientY)},n++;return{timeStamp:Cc(),pointers:e,center:Qc(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Jc(t,e,n){n||(n=Xc);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function tu(t,e,n){n||(n=Xc);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function eu(t,e){return t===e?1:Lc(t)>=Lc(e)?t<0?2:4:e<0?8:Yc}function nu(t,e,n){return{x:e/t||0,y:n/t||0}}function iu(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=Kc(e)),r>1&&!n.firstMultiple?n.firstMultiple=Kc(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=e.center=Qc(i);e.timeStamp=Cc(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=tu(s,c),e.distance=Jc(s,c),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=eu(e.deltaX,e.deltaY);var u,l,h=nu(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=Lc(h.x)>Lc(h.y)?h.x:h.y,e.scale=a?(u=a.pointers,Jc((l=i)[0],l[1],Vc)/Jc(u[0],u[1],Vc)):1,e.rotation=a?function(t,e){return tu(e[1],e[0],Vc)+tu(t[1],t[0],Vc)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!==e.eventType&&(s>25||void 0===a.velocity)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,l=nu(s,c,u);i=l.x,r=l.y,n=Lc(l.x)>Lc(l.y)?l.x:l.y,o=eu(c,u),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var f,p=t.element,d=e.srcEvent;$c(f=d.composedPath?d.composedPath()[0]:d.path?d.path[0]:d.target,p)&&(p=f),e.target=p}function ru(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&e&&i-r===0,a=12&e&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,iu(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ou(t){return t.trim().split(/\s+/g)}function au(t,e,n){Uc(ou(e),function(e){t.addEventListener(e,n,!1)})}function su(t,e,n){Uc(ou(e),function(e){t.removeEventListener(e,n,!1)})}function cu(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var uu=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Zc(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&au(this.element,this.evEl,this.domHandler),this.evTarget&&au(this.target,this.evTarget,this.domHandler),this.evWin&&au(cu(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&su(this.element,this.evEl,this.domHandler),this.evTarget&&su(this.target,this.evTarget,this.domHandler),this.evWin&&su(cu(this.element),this.evWin,this.domHandler)},t}();function lu(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}var hu={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},fu={2:Wc,3:"pen",4:Nc,5:"kinect"},pu="pointerdown",du="pointermove pointerup pointercancel";xc.MSPointerEvent&&!xc.PointerEvent&&(pu="MSPointerDown",du="MSPointerMove MSPointerUp MSPointerCancel");var vu=function(t){function e(){var n,i=e.prototype;return i.evEl=pu,i.evWin=du,(n=t.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return gc(e,t),e.prototype.handler=function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=hu[i],o=fu[t.pointerType]||t.pointerType,a=o===Wc,s=lu(e,t.pointerId,"pointerId");1&r&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&r&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},e}(uu);function mu(t){return Array.prototype.slice.call(t,0)}function yu(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];lu(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}var gu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},bu=function(t){function e(){var n;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).targetIds={},n}return gc(e,t),e.prototype.handler=function(t){var e=gu[t.type],n=xu.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Wc,srcEvent:t})},e}(uu);function xu(t,e){var n,i,r=mu(t.touches),o=this.targetIds;if(3&e&&1===r.length)return o[r[0].identifier]=!0,[r,r];var a=mu(t.changedTouches),s=[],c=this.target;if(i=r.filter(function(t){return $c(t.target,c)}),1===e)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),12&e&&delete o[a[n].identifier],n++;return s.length?[yu(i.concat(s),"identifier",!0),s]:void 0}var wu={mousedown:1,mousemove:2,mouseup:4},_u=function(t){function e(){var n,i=e.prototype;return i.evEl="mousedown",i.evWin="mousemove mouseup",(n=t.apply(this,arguments)||this).pressed=!1,n}return gc(e,t),e.prototype.handler=function(t){var e=wu[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Nc,srcEvent:t}))},e}(uu);function Tu(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},i=this.lastTouches;this.lastTouches.push(n);setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},2500)}}function Su(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,Tu.call(this,e)):12&t&&Tu.call(this,e)}function Lu(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}var Cu=function(){return function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handler=function(t,e,n){var r=n.pointerType===Wc,o=n.pointerType===Nc;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Su.call(bc(bc(i)),e,n);else if(o&&Lu.call(bc(bc(i)),n))return;i.callback(t,e,n)}},i.touch=new bu(i.manager,i.handler),i.mouse=new _u(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return gc(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(uu)}();function Eu(t,e,n){return!!Array.isArray(t)&&(Uc(t,n[e],n),!0)}var Au=32,Mu=1;function Pu(t,e){var n=e.manager;return n?n.get(t):t}function Ou(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Ru=function(){function t(t){void 0===t&&(t={}),this.options=yc({enable:!0},t),this.id=Mu++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return wc(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(Eu(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Pu(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return Eu(t,"dropRecognizeWith",this)||(t=Pu(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(Eu(t,"requireFailure",this))return this;var e=this.requireFail;return-1===lu(e,t=Pu(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(Eu(t,"dropRequireFailure",this))return this;t=Pu(t,this);var e=lu(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Ou(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Ou(n))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Au},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=wc({},t);if(!Zc(this.options.enable,[this,e]))return this.reset(),void(this.state=Au);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),Du=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,yc({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}gc(e,t);var n=e.prototype;return n.getTouchAction=function(){return[Rc]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&i){if(4!==t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||Jc(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout(function(){e.state=8,e.tryEmit()},n.interval),2):8}return Au},n.failTimeout=function(){var t=this;return this._timer=setTimeout(function(){t.state=Au},this.options.interval),Au},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Ru),zu=function(t){function e(e){return void 0===e&&(e={}),t.call(this,yc({pointers:1},e))||this}gc(e,t);var n=e.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(8&n||!r)?16|e:i||r?4&n?8|e:2&e?4|e:2:Au},e}(Ru);function ku(t){return t===Yc?"down":8===t?"up":2===t?"left":4===t?"right":""}var Iu=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,yc({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,n.pY=null,n}gc(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(kc),t&Gc&&e.push(zc),e},n.directionTest=function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,n=o!==this.pX,i=Math.abs(t.deltaX)):(r=0===a?1:a<0?8:Yc,n=a!==this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},n.attrTest=function(t){return zu.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=ku(e.direction);n&&(e.additionalEvent=this.options.event+n),t.prototype.emit.call(this,e)},e}(zu),ju=function(t){function e(e){return void 0===e&&(e={}),t.call(this,yc({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}gc(e,t);var n=e.prototype;return n.getTouchAction=function(){return Iu.prototype.getTouchAction.call(this)},n.attrTest=function(e){var n,i=this.options.direction;return 30&i?n=e.overallVelocity:6&i?n=e.overallVelocityX:i&Gc&&(n=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&Lc(n)>this.options.velocity&&4&e.eventType},n.emit=function(t){var e=ku(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(zu),Bu=function(t){function e(e){return void 0===e&&(e={}),t.call(this,yc({event:"pinch",threshold:0,pointers:2},e))||this}gc(e,t);var n=e.prototype;return n.getTouchAction=function(){return[Dc]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},n.emit=function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}t.prototype.emit.call(this,e)},e}(zu),Fu=function(t){function e(e){return void 0===e&&(e={}),t.call(this,yc({event:"rotate",threshold:0,pointers:2},e))||this}gc(e,t);var n=e.prototype;return n.getTouchAction=function(){return[Dc]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(zu),Wu=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,yc({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,n._input=null,n}gc(e,t);var n=e.prototype;return n.getTouchAction=function(){return[Oc]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout(function(){e.state=8,e.tryEmit()},n.time);else if(4&t.eventType)return 8;return Au},n.reset=function(){clearTimeout(this._timer)},n.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Cc(),this.manager.emit(this.options.event,this._input)))},e}(Ru),Nu={domEvents:!1,touchAction:Pc,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Yu=[[Fu,{enable:!1}],[Bu,{enable:!1},["rotate"]],[ju,{direction:6}],[Iu,{direction:6},["swipe"]],[Du],[Du,{event:"doubletap",taps:2},["tap"]],[Wu]];function Gu(t,e){var n,i=t.element;i.style&&(Uc(t.options.cssProps,function(r,o){n=Ec(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}var Xu=function(){function t(t,e){var n,i=this;this.options=wc({},Nu,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(Bc?vu:Fc?bu:jc?Cu:_u))(n,ru),this.touchAction=new qc(this,this.options.touchAction),Gu(this,!0),Uc(this.options.recognizers,function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}var e=t.prototype;return e.set=function(t){return wc(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(e.curRecognizer=n,r=n),o++}},e.get=function(t){if(t instanceof Ru)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(Eu(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(Eu(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,i=lu(n,e);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return Uc(ou(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return Uc(ou(t),function(t){e?n[t]&&n[t].splice(lu(n[t],e),1):delete n[t]}),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},e.destroy=function(){this.element&&Gu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Vu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Uu=function(t){function e(){var n,i=e.prototype;return i.evTarget="touchstart",i.evWin="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).started=!1,n}return gc(e,t),e.prototype.handler=function(t){var e=Vu[t.type];if(1===e&&(this.started=!0),this.started){var n=Zu.call(this,t,e);12&e&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Wc,srcEvent:t})}},e}(uu);function Zu(t,e){var n=mu(t.touches),i=mu(t.changedTouches);return 12&e&&(n=yu(n.concat(i),"identifier",!0)),[n,i]}function Hu(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),t.apply(this,arguments)}}var qu=Hu(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),$u=Hu(function(t,e){return qu(t,e,!0)},"merge","Use `assign`.");function Qu(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&wc(i,n)}function Ku(t,e){return function(){return t.apply(e,arguments)}}var Ju=function(){var t=function(t,e){return void 0===e&&(e={}),new Xu(t,yc({recognizers:Yu.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=Yc,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=Gc,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=Yc,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=Au,t.Manager=Xu,t.Input=uu,t.TouchAction=qc,t.TouchInput=bu,t.MouseInput=_u,t.PointerEventInput=vu,t.TouchMouseInput=Cu,t.SingleTouchInput=Uu,t.Recognizer=Ru,t.AttrRecognizer=zu,t.Tap=Du,t.Pan=Iu,t.Swipe=ju,t.Pinch=Bu,t.Rotate=Fu,t.Press=Wu,t.on=au,t.off=su,t.each=Uc,t.merge=$u,t.extend=qu,t.bindFn=Ku,t.assign=wc,t.inherit=Qu,t.bindFn=Ku,t.prefixed=Ec,t.toArray=mu,t.inArray=lu,t.uniqueArray=yu,t.splitStr=ou,t.boolOrFn=Zc,t.hasParent=$c,t.addEventListeners=au,t.removeEventListeners=su,t.defaults=wc({},Nu,{preset:Yu}),t}();
/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 6.0.0
 * @date    2025-07-12T18:02:43.836Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const tl="undefined"!=typeof window?window.Hammer||Ju:function(){return function(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get:()=>({set:t})}}()};function el(t){this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const e=tl(this._dom.overlay);e.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push(()=>{e.destroy()});["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(t=>{e.on(t,t=>{t.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=e=>{(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=t=>{("key"in t?"Escape"===t.key:27===t.keyCode)&&this.deactivate()}}mc(el.prototype),el.current=null,el.prototype.destroy=function(){this.deactivate();for(const t of this._cleanupQueue.splice(0).reverse())t()},el.prototype.activate=function(){el.current&&el.current.deactivate(),el.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},el.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},el.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};const nl=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,il=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;function rl(t,e,n,i){let r=!1;!0===i&&(r=null===e[n]&&void 0!==t[n]),r?delete t[n]:t[n]=e[n]}function ol(t,e,n=!1,i=!1){for(const r in e)(Object.prototype.hasOwnProperty.call(e,r)||!0===n)&&("object"==typeof e[r]&&null!==e[r]&&Object.getPrototypeOf(e[r])===Object.prototype?void 0===t[r]?t[r]=ol({},e[r],n):"object"==typeof t[r]&&null!==t[r]&&Object.getPrototypeOf(t[r])===Object.prototype?ol(t[r],e[r],n):rl(t,e,r,i):Array.isArray(e[r])?t[r]=e[r].slice():rl(t,e,r,i));return t}function al(t,e){return[...t,e]}function sl(t){return t.slice()}function cl(t){t||(t=window.event),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}function ul(t,e,n){let i,r,o;const a=Math.floor(6*t),s=6*t-a,c=n*(1-e),u=n*(1-s*e),l=n*(1-(1-s)*e);switch(a%6){case 0:i=n,r=l,o=c;break;case 1:i=u,r=n,o=c;break;case 2:i=c,r=n,o=l;break;case 3:i=c,r=u,o=n;break;case 4:i=l,r=c,o=n;break;case 5:i=n,r=c,o=u}return{r:Math.floor(255*i),g:Math.floor(255*r),b:Math.floor(255*o)}}let ll,hl=!1;const fl="background: #FFeeee; color: #dd0000";const pl=fl,dl=class t{static validate(e,n,i){hl=!1,ll=n;let r=n;return void 0!==i&&(r=n[i]),t.parse(e,r,[]),hl}static parse(e,n,i){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.check(r,e,n,i)}static check(e,n,i,r){if(void 0===i[e]&&void 0===i.__any__)return void t.getSuggestion(e,i,r);let o=e,a=!0;void 0===i[e]&&void 0!==i.__any__&&(o="__any__",a="object"===t.getType(n[e]));let s=i[o];a&&void 0!==s.__type__&&(s=s.__type__),t.checkFields(e,n,i,o,s,r)}static checkFields(e,n,i,r,o,a){const s=function(n){console.error("%c"+n+t.printLocation(a,e),fl)},c=t.getType(n[e]),u=o[c];void 0!==u?"array"===t.getType(u)&&-1===u.indexOf(n[e])?(s('Invalid option detected in "'+e+'". Allowed values are:'+t.print(u)+' not "'+n[e]+'". '),hl=!0):"object"===c&&"__any__"!==r&&(a=al(a,e),t.parse(n[e],i[r],a)):void 0===o.any&&(s('Invalid type received for "'+e+'". Expected: '+t.print(Object.keys(o))+". Received ["+c+'] "'+n[e]+'"'),hl=!0)}static getType(t){const e=typeof t;return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}static getSuggestion(e,n,i){const r=t.findInOptions(e,n,i,!1),o=t.findInOptions(e,ll,[],!0);let a;a=void 0!==r.indexMatch?" in "+t.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n':o.distance<=4&&r.distance>o.distance?" in "+t.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""):r.distance<=8?'. Did you mean "'+r.closestMatch+'"?'+t.printLocation(r.path,e):". Did you mean one of these: "+t.print(Object.keys(n))+t.printLocation(i,e),console.error('%cUnknown option detected: "'+e+'"'+a,fl),hl=!0}static findInOptions(e,n,i,r=!1){let o=1e9,a="",s=[];const c=e.toLowerCase();let u;for(const l in n){let h;if(void 0!==n[l].__type__&&!0===r){const r=t.findInOptions(e,n[l],al(i,l));o>r.distance&&(a=r.closestMatch,s=r.path,o=r.distance,u=r.indexMatch)}else-1!==l.toLowerCase().indexOf(c)&&(u=l),h=t.levenshteinDistance(e,l),o>h&&(a=l,s=sl(i),o=h)}return{closestMatch:a,path:s,distance:o,indexMatch:u}}static printLocation(t,e,n="Problem value found at: \n"){let i="\n\n"+n+"options = {\n";for(let e=0;e<t.length;e++){for(let t=0;t<e+1;t++)i+="  ";i+=t[e]+": {\n"}for(let e=0;e<t.length+1;e++)i+="  ";i+=e+"\n";for(let e=0;e<t.length+1;e++){for(let n=0;n<t.length-e;n++)i+="  ";i+="}\n"}return i+"\n\n"}static print(t){return JSON.stringify(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;const n=[];let i,r;for(i=0;i<=e.length;i++)n[i]=[i];for(r=0;r<=t.length;r++)n[0][r]=r;for(i=1;i<=e.length;i++)for(r=1;r<=t.length;r++)e.charAt(i-1)==t.charAt(r-1)?n[i][r]=n[i-1][r-1]:n[i][r]=Math.min(n[i-1][r-1]+1,Math.min(n[i][r-1]+1,n[i-1][r]+1));return n[e.length][t.length]}};function vl(t,e,n){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0}function ml(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0}function yl(t,e){if(void 0===t)throw new Error("No container element defined");if(this.container=t,this.visible=!e||null==e.visible||e.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);const t=this;this.frame.slide.onmousedown=function(e){t._onMouseDown(e)},this.frame.prev.onclick=function(e){t.prev(e)},this.frame.play.onclick=function(e){t.togglePlay(e)},this.frame.next.onclick=function(e){t.next(e)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}function gl(t,e,n,i){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(t,e,n,i)}vl.subtract=function(t,e){const n=new vl;return n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z,n},vl.add=function(t,e){const n=new vl;return n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z,n},vl.avg=function(t,e){return new vl((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2)},vl.scalarProduct=function(t,e){return new vl(t.x*e,t.y*e,t.z*e)},vl.dotProduct=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},vl.crossProduct=function(t,e){const n=new vl;return n.x=t.y*e.z-t.z*e.y,n.y=t.z*e.x-t.x*e.z,n.z=t.x*e.y-t.y*e.x,n},vl.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},vl.prototype.normalize=function(){return vl.scalarProduct(this,1/this.length())},yl.prototype.prev=function(){let t=this.getIndex();t>0&&(t--,this.setIndex(t))},yl.prototype.next=function(){let t=this.getIndex();t<ka(this).length-1&&(t++,this.setIndex(t))},yl.prototype.playNext=function(){const t=new Date;let e=this.getIndex();e<ka(this).length-1?(e++,this.setIndex(e)):this.playLoop&&(e=0,this.setIndex(e));const n=new Date-t,i=Math.max(this.playInterval-n,0),r=this;this.playTimeout=oc(function(){r.playNext()},i)},yl.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},yl.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},yl.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},yl.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},yl.prototype.setPlayInterval=function(t){this.playInterval=t},yl.prototype.getPlayInterval=function(){return this.playInterval},yl.prototype.setPlayLoop=function(t){this.playLoop=t},yl.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},yl.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";const t=this.indexToLeft(this.index);this.frame.slide.style.left=t+"px"}},yl.prototype.setValues=function(t){this.values=t,ka(this).length>0?this.setIndex(0):this.index=void 0},yl.prototype.setIndex=function(t){if(!(t<ka(this).length))throw new Error("Index out of range");this.index=t,this.redraw(),this.onChange()},yl.prototype.getIndex=function(){return this.index},yl.prototype.get=function(){return ka(this)[this.index]},yl.prototype._onMouseDown=function(t){if(!(t.which?1===t.which:1===t.button))return;this.startClientX=t.clientX,this.startSlideX=Mr(this.frame.slide.style.left),this.frame.style.cursor="move";const e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},document.addEventListener("mousemove",this.onmousemove),document.addEventListener("mouseup",this.onmouseup),cl(t)},yl.prototype.leftToIndex=function(t){const e=Mr(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,n=t-3;let i=Math.round(n/e*(ka(this).length-1));return i<0&&(i=0),i>ka(this).length-1&&(i=ka(this).length-1),i},yl.prototype.indexToLeft=function(t){const e=Mr(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;return t/(ka(this).length-1)*e+3},yl.prototype._onMouseMove=function(t){const e=t.clientX-this.startClientX,n=this.startSlideX+e,i=this.leftToIndex(n);this.setIndex(i),cl()},yl.prototype._onMouseUp=function(){this.frame.style.cursor="auto",document.removeEventListener("mousemove",this.onmousemove),document.removeEventListener("mouseup",this.onmouseup),cl()},gl.prototype.isNumeric=function(t){return!isNaN(Mr(t))&&isFinite(t)},gl.prototype.setRange=function(t,e,n,i){if(!this.isNumeric(t))throw new Error("Parameter 'start' is not numeric; value: "+t);if(!this.isNumeric(e))throw new Error("Parameter 'end' is not numeric; value: "+t);if(!this.isNumeric(n))throw new Error("Parameter 'step' is not numeric; value: "+t);this._start=t||0,this._end=e||0,this.setStep(n,i)},gl.prototype.setStep=function(t,e){void 0===t||t<=0||(void 0!==e&&(this.prettyStep=e),!0===this.prettyStep?this._step=gl.calculatePrettyStep(t):this._step=t)},gl.calculatePrettyStep=function(t){const e=function(t){return Math.log(t)/Math.LN10},n=Math.pow(10,Math.round(e(t))),i=2*Math.pow(10,Math.round(e(t/2))),r=5*Math.pow(10,Math.round(e(t/5)));let o=n;return Math.abs(i-t)<=Math.abs(o-t)&&(o=i),Math.abs(r-t)<=Math.abs(o-t)&&(o=r),o<=0&&(o=1),o},gl.prototype.getCurrent=function(){return Mr(this._current.toPrecision(this.precision))},gl.prototype.getStep=function(){return this._step},gl.prototype.start=function(t){void 0===t&&(t=!1),this._current=this._start-this._start%this._step,t&&this.getCurrent()<this._start&&this.next()},gl.prototype.next=function(){this._current+=this._step},gl.prototype.end=function(){return this._current>this._end};var bl,xl,wl,_l,Tl,Sl,Ll,Cl,El,Al={};function Ml(){return wl?xl:(wl=1,function(){if(bl)return Al;bl=1;var t=Mn(),e=Wi(),n=Yi(),i=Et(),r=li(),o=Dn(),a=Ct(),s=Ts(),c=we(),u=Ui(),l=Bn(),h=u("slice"),f=c("species"),p=Array,d=Math.max;t({target:"Array",proto:!0,forced:!h},{slice:function(t,c){var u,h,v,m=a(this),y=o(m),g=r(t,y),b=r(void 0===c?y:c,y);if(e(m)&&(u=m.constructor,(n(u)&&(u===p||e(u.prototype))||i(u)&&null===(u=u[f]))&&(u=void 0),u===p||void 0===u))return l(m,g,b);for(h=new(void 0===u?p:u)(d(b-g,0)),v=0;g<b;g++,v++)g in m&&s(h,v,m[g]);return h.length=v,h}})}(),xl=Vn()("Array","slice"))}function Pl(){if(Tl)return _l;Tl=1;var t=v(),e=Ml(),n=Array.prototype;return _l=function(i){var r=i.slice;return i===n||t(n,i)&&r===n.slice?e:r}}function Ol(){return Ll?Sl:(Ll=1,Sl=Pl())}var Rl,Dl,zl,kl,Il,jl,Bl,Fl,Wl,Nl=h(El?Cl:(El=1,Cl=Ol())),Yl={};function Gl(){return zl?Dl:(zl=1,function(){if(Rl)return Yl;Rl=1;var t=Mn(),e=d(),n=Wi(),i=e([].reverse),r=[1,2];t({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),i(this)}})}(),Dl=Vn()("Array","reverse"))}function Xl(){if(Il)return kl;Il=1;var t=v(),e=Gl(),n=Array.prototype;return kl=function(i){var r=i.reverse;return i===n||t(n,i)&&r===n.reverse?e:r}}function Vl(){return Bl?jl:(Bl=1,jl=Xl())}var Ul,Zl,Hl,ql,$l,Ql,Kl,Jl,th,eh=h(Wl?Fl:(Wl=1,Fl=Vl())),nh={};function ih(){return Hl?Zl:(Hl=1,function(){if(Ul)return nh;Ul=1;var t=Mn(),e=Vi().map;t({target:"Array",proto:!0,forced:!Ui()("map")},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})}(),Zl=Vn()("Array","map"))}function rh(){if($l)return ql;$l=1;var t=v(),e=ih(),n=Array.prototype;return ql=function(i){var r=i.map;return i===n||t(n,i)&&r===n.map?e:r}}function oh(){return Kl?Ql:(Kl=1,Ql=rh())}var ah,sh,ch,uh,lh,hh,fh,ph,dh,vh=h(th?Jl:(th=1,Jl=oh()));function mh(){return sh?ah:(sh=1,ah=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1})}function yh(){return lh?uh:(lh=1,ch||(ch=1,Mn()({target:"Math",stat:!0},{sign:mh()})),uh=At().Math.sign)}function gh(){return fh?hh:(fh=1,hh=yh())}var bh=h(dh?ph:(dh=1,ph=gh()));function xh(){this.armLocation=new vl,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraOffset=new vl,this.offsetMultiplier=.6,this.cameraLocation=new vl,this.cameraRotation=new vl(.5*Math.PI,0,0),this.calculateCameraOrientation()}xh.prototype.setOffset=function(t,e){const n=Math.abs,i=bh,r=this.offsetMultiplier,o=this.armLength*r;n(t)>o&&(t=i(t)*o),n(e)>o&&(e=i(e)*o),this.cameraOffset.x=t,this.cameraOffset.y=e,this.calculateCameraOrientation()},xh.prototype.getOffset=function(){return this.cameraOffset},xh.prototype.setArmLocation=function(t,e,n){this.armLocation.x=t,this.armLocation.y=e,this.armLocation.z=n,this.calculateCameraOrientation()},xh.prototype.setArmRotation=function(t,e){void 0!==t&&(this.armRotation.horizontal=t),void 0!==e&&(this.armRotation.vertical=e,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===t&&void 0===e||this.calculateCameraOrientation()},xh.prototype.getArmRotation=function(){const t={};return t.horizontal=this.armRotation.horizontal,t.vertical=this.armRotation.vertical,t},xh.prototype.setArmLength=function(t){void 0!==t&&(this.armLength=t,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.setOffset(this.cameraOffset.x,this.cameraOffset.y),this.calculateCameraOrientation())},xh.prototype.getArmLength=function(){return this.armLength},xh.prototype.getCameraLocation=function(){return this.cameraLocation},xh.prototype.getCameraRotation=function(){return this.cameraRotation},xh.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal;const t=this.cameraRotation.x,e=this.cameraRotation.z,n=this.cameraOffset.x,i=this.cameraOffset.y,r=Math.sin,o=Math.cos;this.cameraLocation.x=this.cameraLocation.x+n*o(e)+i*-r(e)*o(t),this.cameraLocation.y=this.cameraLocation.y+n*r(e)+i*o(e)*o(t),this.cameraLocation.z=this.cameraLocation.z+i*r(t)};const wh={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},_h={dot:wh.DOT,"dot-line":wh.DOTLINE,"dot-color":wh.DOTCOLOR,"dot-size":wh.DOTSIZE,line:wh.LINE,grid:wh.GRID,surface:wh.SURFACE,bar:wh.BAR,"bar-color":wh.BARCOLOR,"bar-size":wh.BARSIZE},Th=["width","height","filterLabel","legendLabel","xLabel","yLabel","zLabel","xValueLabel","yValueLabel","zValueLabel","showXAxis","showYAxis","showZAxis","showGrayBottom","showGrid","showPerspective","showShadow","showSurfaceGrid","keepAspectRatio","rotateAxisLabels","verticalRatio","dotSizeRatio","dotSizeMinFraction","dotSizeMaxFraction","showAnimationControls","animationInterval","animationPreload","animationAutoStart","axisColor","axisFontSize","axisFontType","gridColor","xCenter","yCenter","zoomable","tooltipDelay","ctrlToZoom"],Sh=["xBarWidth","yBarWidth","valueMin","valueMax","xMin","xMax","xStep","yMin","yMax","yStep","zMin","zMax","zStep"];let Lh;function Ch(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Eh(t,e){return void 0===t||""===t?e:t+(void 0===(n=e)||""===n||"string"!=typeof n?n:n.charAt(0).toUpperCase()+Nl(n).call(n,1));var n}function Ah(t,e,n,i){let r,o;for(let a=0;a<n.length;++a)r=n[a],o=Eh(i,r),e[o]=t[r]}function Mh(t,e,n,i){let r,o;for(let a=0;a<n.length;++a)r=n[a],void 0!==t[r]&&(o=Eh(i,r),e[o]=t[r])}function Ph(t,e){if(void 0!==t.backgroundColor&&function(t,e){let n="white",i="gray",r=1;if("string"==typeof t)n=t,i="none",r=0;else{if("object"!=typeof t)throw new Error("Unsupported type of backgroundColor");void 0!==Hr(t)&&(n=Hr(t)),void 0!==t.stroke&&(i=t.stroke),void 0!==t.strokeWidth&&(r=t.strokeWidth)}e.frame.style.backgroundColor=n,e.frame.style.borderColor=i,e.frame.style.borderWidth=r+"px",e.frame.style.borderStyle="solid"}(t.backgroundColor,e),function(t,e){if(void 0===t)return;void 0===e.dataColor&&(e.dataColor={});"string"==typeof t?(e.dataColor.fill=t,e.dataColor.stroke=t):(Hr(t)&&(e.dataColor.fill=Hr(t)),t.stroke&&(e.dataColor.stroke=t.stroke),void 0!==t.strokeWidth&&(e.dataColor.strokeWidth=t.strokeWidth))}(t.dataColor,e),function(t,e){if(void 0===t)return;let n;if("string"==typeof t){if(n=function(t){const e=_h[t];if(void 0===e)return-1;return e}(t),-1===n)throw new Error("Style '"+t+"' is invalid")}else{if(!function(t){let e=!1;for(const n in wh)if(wh[n]===t){e=!0;break}return e}(t))throw new Error("Style '"+t+"' is invalid");n=t}e.style=n}(t.style,e),void 0!==t.surfaceColors){if(console.warn("`options.surfaceColors` is deprecated and may be removed in a future version. Please use `options.colormap` instead. Note that the `colormap` option uses the inverse array ordering (running from vMin to vMax)."),void 0!==t.colormap)throw new Error("The `colormap` and `surfaceColors` options are mutually exclusive.");"surface"!==e.style?console.warn("Ignoring `surfaceColors` in graph style `"+e.style+"` for backward compatibility (only effective in `surface` plots)."):function(t,e){if(void 0===t||!0===t)return;if(!1===t)return void(e.surfaceColors=void 0);void 0===e.surfaceColors&&(e.surfaceColors={});let n;if(rs(t))n=Oh(t);else{if("object"!=typeof t)throw new Error("Unsupported type of surfaceColors");n=Rh(t.hue)}eh(n).call(n),e.colormap=n}(t.surfaceColors,e)}else!function(t,e){if(void 0===t)return;let n;if(rs(t))n=Oh(t);else if("object"==typeof t)n=Rh(t.hue);else{if("function"!=typeof t)throw new Error("Unsupported type of colormap");n=t}e.colormap=n}(t.colormap,e);!function(t,e){if(void 0===t){if(void 0===Lh.showLegend){const t=e.style===wh.DOTCOLOR||e.style===wh.DOTSIZE;e.showLegend=t}}else e.showLegend=t}(t.showLegend,e),Dh(t.cameraPosition,e),void 0!==t.tooltip&&(e.showTooltip=t.tooltip),null!=t.onclick&&(e.onclick_callback=t.onclick,console.warn("`options.onclick` is deprecated and may be removed in a future version. Please use `Graph3d.on('click', handler)` instead.")),void 0!==t.tooltipStyle&&function(t,e,n,i=!1){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(let r=0;r<t.length;r++){const o=t[r];if(Object.prototype.hasOwnProperty.call(n,o))if(n[o]&&n[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?ol(e[o],n[o],!1,i):rl(e,n,o,i);else{if(Array.isArray(n[o]))throw new TypeError("Arrays are not supported by deepExtend");rl(e,n,o,i)}}}(["tooltipStyle"],e,t)}function Oh(t){if(t.length<2)throw new Error("Colormap array length must be 2 or above.");return vh(t).call(t,function(t){if(!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t))throw new Error("Invalid hex color code supplied to colormap.");return function(t){let e;switch(t.length){case 3:case 4:return e=il.exec(t),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=nl.exec(t),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}(t)})}function Rh(t){if(void 0===t)throw new Error("Unsupported type of colormap");if(!(t.saturation>=0&&t.saturation<=100))throw new Error("Saturation is out of bounds. Expected range is 0-100.");if(!(t.brightness>=0&&t.brightness<=100))throw new Error("Brightness is out of bounds. Expected range is 0-100.");if(!(t.colorStops>=2))throw new Error("colorStops is out of bounds. Expected 2 or above.");const e=(t.end-t.start)/(t.colorStops-1),n=[];for(let i=0;i<t.colorStops;++i){const r=(t.start+e*i)%360/360;n.push(ul(r<0?r+1:r,t.saturation/100,t.brightness/100))}return n}function Dh(t,e){const n=t;void 0!==n&&(void 0===e.camera&&(e.camera=new xh),e.camera.setArmRotation(n.horizontal,n.vertical),e.camera.setArmLength(n.distance))}const zh="string",kh="boolean",Ih="number",jh="object",Bh="array",Fh={fill:{string:zh},stroke:{string:zh},strokeWidth:{number:Ih},__type__:{string:zh,object:jh,undefined:"undefined"}},Wh={animationAutoStart:{boolean:kh,undefined:"undefined"},animationInterval:{number:Ih},animationPreload:{boolean:kh},axisColor:{string:zh},axisFontSize:{number:Ih},axisFontType:{string:zh},backgroundColor:Fh,xBarWidth:{number:Ih,undefined:"undefined"},yBarWidth:{number:Ih,undefined:"undefined"},cameraPosition:{distance:{number:Ih},horizontal:{number:Ih},vertical:{number:Ih},__type__:{object:jh}},zoomable:{boolean:kh},ctrlToZoom:{boolean:kh},xCenter:{string:zh},yCenter:{string:zh},colormap:{hue:{start:{number:Ih},end:{number:Ih},saturation:{number:Ih},brightness:{number:Ih},colorStops:{number:Ih},__type__:{object:jh}},__type__:{array:Bh,object:jh,function:"function",undefined:"undefined"}},dataColor:Fh,dotSizeMinFraction:{number:Ih},dotSizeMaxFraction:{number:Ih},dotSizeRatio:{number:Ih},filterLabel:{string:zh},gridColor:{string:zh},onclick:{function:"function"},keepAspectRatio:{boolean:kh},xLabel:{string:zh},yLabel:{string:zh},zLabel:{string:zh},legendLabel:{string:zh},xMin:{number:Ih,undefined:"undefined"},yMin:{number:Ih,undefined:"undefined"},zMin:{number:Ih,undefined:"undefined"},xMax:{number:Ih,undefined:"undefined"},yMax:{number:Ih,undefined:"undefined"},zMax:{number:Ih,undefined:"undefined"},showAnimationControls:{boolean:kh,undefined:"undefined"},showGrayBottom:{boolean:kh},showGrid:{boolean:kh},showLegend:{boolean:kh,undefined:"undefined"},showPerspective:{boolean:kh},showShadow:{boolean:kh},showSurfaceGrid:{boolean:kh},showXAxis:{boolean:kh},showYAxis:{boolean:kh},showZAxis:{boolean:kh},rotateAxisLabels:{boolean:kh},surfaceColors:{hue:{start:{number:Ih},end:{number:Ih},saturation:{number:Ih},brightness:{number:Ih},colorStops:{number:Ih},__type__:{object:jh}},__type__:{boolean:kh,array:Bh,object:jh,undefined:"undefined"}},xStep:{number:Ih,undefined:"undefined"},yStep:{number:Ih,undefined:"undefined"},zStep:{number:Ih,undefined:"undefined"},style:{number:Ih,string:["bar","bar-color","bar-size","dot","dot-line","dot-color","dot-size","line","grid","surface"]},tooltip:{boolean:kh,function:"function"},tooltipDelay:{number:Ih},tooltipStyle:{content:{color:{string:zh},background:{string:zh},border:{string:zh},borderRadius:{string:zh},boxShadow:{string:zh},padding:{string:zh},__type__:{object:jh}},line:{borderLeft:{string:zh},height:{string:zh},width:{string:zh},pointerEvents:{string:zh},__type__:{object:jh}},dot:{border:{string:zh},borderRadius:{string:zh},height:{string:zh},width:{string:zh},pointerEvents:{string:zh},__type__:{object:jh}},__type__:{object:jh}},xValueLabel:{function:"function"},yValueLabel:{function:"function"},zValueLabel:{function:"function"},valueMax:{number:Ih,undefined:"undefined"},valueMin:{number:Ih,undefined:"undefined"},verticalRatio:{number:Ih},height:{string:zh},width:{string:zh},__type__:{object:jh}};function Nh(){this.min=void 0,this.max=void 0}function Yh(t,e,n){this.dataGroup=t,this.column=e,this.graph=n,this.index=void 0,this.value=void 0,this.values=t.getDistinctValues(this.column),ka(this).length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,n.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}function Gh(){this.dataTable=null}Nh.prototype.adjust=function(t){void 0!==t&&((void 0===this.min||this.min>t)&&(this.min=t),(void 0===this.max||this.max<t)&&(this.max=t))},Nh.prototype.combine=function(t){this.add(t.min),this.add(t.max)},Nh.prototype.expand=function(t){if(void 0===t)return;const e=this.min-t,n=this.max+t;if(e>n)throw new Error("Passed expansion value makes range invalid");this.min=e,this.max=n},Nh.prototype.range=function(){return this.max-this.min},Nh.prototype.center=function(){return(this.min+this.max)/2},Yh.prototype.isLoaded=function(){return this.loaded},Yh.prototype.getLoadedProgress=function(){const t=ka(this).length;let e=0;for(;this.dataPoints[e];)e++;return Math.round(e/t*100)},Yh.prototype.getLabel=function(){return this.graph.filterLabel},Yh.prototype.getColumn=function(){return this.column},Yh.prototype.getSelectedValue=function(){if(void 0!==this.index)return ka(this)[this.index]},Yh.prototype.getValues=function(){return ka(this)},Yh.prototype.getValue=function(t){if(t>=ka(this).length)throw new Error("Index out of range");return ka(this)[t]},Yh.prototype._getDataPoints=function(e){if(void 0===e&&(e=this.index),void 0===e)return[];let n;if(this.dataPoints[e])n=this.dataPoints[e];else{const i={};i.column=this.column,i.value=ka(this)[e];const r=new t(this.dataGroup.getDataSet(),{filter:function(t){return t[i.column]==i.value}}).get();n=this.dataGroup._getDataPoints(r),this.dataPoints[e]=n}return n},Yh.prototype.setOnLoadCallback=function(t){this.onLoadCallback=t},Yh.prototype.selectValue=function(t){if(t>=ka(this).length)throw new Error("Index out of range");this.index=t,this.value=ka(this)[t]},Yh.prototype.loadInBackground=function(t){void 0===t&&(t=0);const e=this.graph.frame;if(t<ka(this).length){void 0===e.progress&&(e.progress=document.createElement("DIV"),e.progress.style.position="absolute",e.progress.style.color="gray",e.appendChild(e.progress));const n=this.getLoadedProgress();e.progress.innerHTML="Loading animation... "+n+"%",e.progress.style.bottom="60px",e.progress.style.left="10px";const i=this;oc(function(){i.loadInBackground(t+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==e.progress&&(e.removeChild(e.progress),e.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},Gh.prototype.initializeData=function(n,i,r){if(void 0===i)return;let o;if(rs(i)&&(i=new e(i)),!(i instanceof e||i instanceof t))throw new Error("Array, DataSet, or DataView expected");if(o=i.get(),0==o.length)return;this.style=r,this.dataSet&&this.dataSet.off("*",this._onChange),this.dataSet=i,this.dataTable=o;const a=this;this._onChange=function(){n.setData(a.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z";const s=n.hasBars(r);if(s&&(void 0!==n.defaultXBarWidth?this.xBarWidth=n.defaultXBarWidth:this.xBarWidth=this.getSmallestDifference(o,this.colX)||1,void 0!==n.defaultYBarWidth?this.yBarWidth=n.defaultYBarWidth:this.yBarWidth=this.getSmallestDifference(o,this.colY)||1),this._initializeRange(o,this.colX,n,s),this._initializeRange(o,this.colY,n,s),this._initializeRange(o,this.colZ,n,!1),Object.prototype.hasOwnProperty.call(o[0],"style")){this.colValue="style";const t=this.getColumnRange(o,this.colValue);this._setRangeDefaults(t,n.defaultValueMin,n.defaultValueMax),this.valueRange=t}else this.colValue="z",this.valueRange=this.zRange;const c=this.getDataTable();let u;return Object.prototype.hasOwnProperty.call(c[0],"filter")&&void 0===this.dataFilter&&(this.dataFilter=new Yh(this,"filter",n),this.dataFilter.setOnLoadCallback(function(){n.redraw()})),u=this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.getDataTable()),u},Gh.prototype._collectRangeSettings=function(t,e){var n;if(-1==Bi(n=["x","y","z"]).call(n,t))throw new Error("Column '"+t+"' invalid");const i=t.toUpperCase();return{barWidth:this[t+"BarWidth"],min:e["default"+i+"Min"],max:e["default"+i+"Max"],step:e["default"+i+"Step"],range_label:t+"Range",step_label:t+"Step"}},Gh.prototype._initializeRange=function(t,e,n,i){const r=this._collectRangeSettings(e,n),o=this.getColumnRange(t,e);i&&"z"!=e&&o.expand(r.barWidth/2),this._setRangeDefaults(o,r.min,r.max),this[r.range_label]=o,this[r.step_label]=void 0!==r.step?r.step:o.range()/5},Gh.prototype.getDistinctValues=function(t,e){void 0===e&&(e=this.dataTable);const n=[];for(let i=0;i<e.length;i++){const r=e[i][t]||0;-1===Bi(n).call(n,r)&&n.push(r)}return ci(n).call(n,function(t,e){return t-e})},Gh.prototype.getSmallestDifference=function(t,e){const n=this.getDistinctValues(t,e);let i=null;for(let t=1;t<n.length;t++){const e=n[t]-n[t-1];(null==i||i>e)&&(i=e)}return i},Gh.prototype.getColumnRange=function(t,e){const n=new Nh;for(let i=0;i<t.length;i++){const r=t[i][e];n.adjust(r)}return n},Gh.prototype.getNumberOfRows=function(){return this.dataTable.length},Gh.prototype._setRangeDefaults=function(t,e,n){void 0!==e&&(t.min=e),void 0!==n&&(t.max=n),t.max<=t.min&&(t.max=t.min+1)},Gh.prototype.getDataTable=function(){return this.dataTable},Gh.prototype.getDataSet=function(){return this.dataSet},Gh.prototype.getDataPoints=function(t){const e=[];for(let n=0;n<t.length;n++){const i=new vl;i.x=t[n][this.colX]||0,i.y=t[n][this.colY]||0,i.z=t[n][this.colZ]||0,i.data=t[n],i.value=t[n][this.colValue]||0;const r={};r.point=i,r.bottom=new vl(i.x,i.y,this.zRange.min),r.trans=void 0,r.screen=void 0,e.push(r)}return e},Gh.prototype.initDataAsMatrix=function(t){let e,n,i,r;const o=this.getDistinctValues(this.colX,t),a=this.getDistinctValues(this.colY,t),s=this.getDataPoints(t),c=[];for(i=0;i<s.length;i++){r=s[i];const t=Bi(o).call(o,r.point.x),e=Bi(a).call(a,r.point.y);void 0===c[t]&&(c[t]=[]),c[t][e]=r}for(e=0;e<c.length;e++)for(n=0;n<c[e].length;n++)c[e][n]&&(c[e][n].pointRight=e<c.length-1?c[e+1][n]:void 0,c[e][n].pointTop=n<c[e].length-1?c[e][n+1]:void 0,c[e][n].pointCross=e<c.length-1&&n<c[e].length-1?c[e+1][n+1]:void 0);return s},Gh.prototype.getInfo=function(){const t=this.dataFilter;if(t)return t.getLabel()+": "+t.getSelectedValue()},Gh.prototype.reload=function(){this.dataTable&&this.setData(this.dataTable)},Gh.prototype._getDataPoints=function(t){let e=[];if(this.style===wh.GRID||this.style===wh.SURFACE)e=this.initDataAsMatrix(t);else if(e=this.getDataPoints(t),this.style===wh.LINE)for(let t=0;t<e.length;t++)t>0&&(e[t-1].pointNext=e[t]);return e},Vh.STYLE=wh;const Xh=void 0;function Vh(t,e,n){if(!(this instanceof Vh))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=t,this.dataGroup=new Gh,this.dataPoints=null,this.create(),function(t,e){if(void 0===t||Ch(t))throw new Error("No DEFAULTS passed");if(void 0===e)throw new Error("No dst passed");Lh=t,Ah(t,e,Th),Ah(t,e,Sh,"default"),Ph(t,e),e.margin=10,e.showTooltip=!1,e.onclick_callback=null,e.eye=new vl(0,0,-1)}(Vh.DEFAULTS,this),this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.setOptions(n),this.setData(e)}function Uh(t){return"clientX"in t?t.clientX:t.targetTouches[0]&&t.targetTouches[0].clientX||0}function Zh(t){return"clientY"in t?t.clientY:t.targetTouches[0]&&t.targetTouches[0].clientY||0}Vh.DEFAULTS={width:"400px",height:"400px",filterLabel:"time",legendLabel:"value",xLabel:"x",yLabel:"y",zLabel:"z",xValueLabel:function(t){return t},yValueLabel:function(t){return t},zValueLabel:function(t){return t},showXAxis:!0,showYAxis:!0,showZAxis:!0,showGrayBottom:!1,showGrid:!0,showPerspective:!0,showShadow:!1,showSurfaceGrid:!0,keepAspectRatio:!0,rotateAxisLabels:!0,verticalRatio:.5,dotSizeRatio:.02,dotSizeMinFraction:.5,dotSizeMaxFraction:2.5,showAnimationControls:Xh,animationInterval:1e3,animationPreload:!1,animationAutoStart:Xh,axisFontSize:14,axisFontType:"arial",axisColor:"#4D4D4D",gridColor:"#D3D3D3",xCenter:"55%",yCenter:"50%",style:Vh.STYLE.DOT,tooltip:!1,tooltipDelay:300,tooltipStyle:{content:{padding:"10px",border:"1px solid #4d4d4d",color:"#1a1a1a",background:"rgba(255,255,255,0.7)",borderRadius:"2px",boxShadow:"5px 5px 10px rgba(128,128,128,0.5)"},line:{height:"40px",width:"0",borderLeft:"1px solid #4d4d4d",pointerEvents:"none"},dot:{height:"0",width:"0",border:"5px solid #4d4d4d",borderRadius:"5px",pointerEvents:"none"}},dataColor:{fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},surfaceColors:Xh,colormap:Xh,cameraPosition:{horizontal:1,vertical:.5,distance:1.7},zoomable:!0,ctrlToZoom:!1,showLegend:Xh,backgroundColor:Xh,xBarWidth:Xh,yBarWidth:Xh,valueMin:Xh,valueMax:Xh,xMin:Xh,xMax:Xh,xStep:Xh,yMin:Xh,yMax:Xh,yStep:Xh,zMin:Xh,zMax:Xh,zStep:Xh},mc(Vh.prototype),Vh.prototype._setScale=function(){this.scale=new vl(1/this.xRange.range(),1/this.yRange.range(),1/this.zRange.range()),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,void 0!==this.valueRange&&(this.scale.value=1/this.valueRange.range());const t=this.xRange.center()*this.scale.x,e=this.yRange.center()*this.scale.y,n=this.zRange.center()*this.scale.z;this.camera.setArmLocation(t,e,n)},Vh.prototype._convert3Dto2D=function(t){const e=this._convertPointToTranslation(t);return this._convertTranslationToScreen(e)},Vh.prototype._convertPointToTranslation=function(t){const e=this.camera.getCameraLocation(),n=this.camera.getCameraRotation(),i=t.x*this.scale.x,r=t.y*this.scale.y,o=t.z*this.scale.z,a=e.x,s=e.y,c=e.z,u=Math.sin(n.x),l=Math.cos(n.x),h=Math.sin(n.y),f=Math.cos(n.y),p=Math.sin(n.z),d=Math.cos(n.z);return new vl(f*(p*(r-s)+d*(i-a))-h*(o-c),u*(f*(o-c)+h*(p*(r-s)+d*(i-a)))+l*(d*(r-s)-p*(i-a)),l*(f*(o-c)+h*(p*(r-s)+d*(i-a)))-u*(d*(r-s)-p*(i-a)))},Vh.prototype._convertTranslationToScreen=function(t){const e=this.eye.x,n=this.eye.y,i=this.eye.z,r=t.x,o=t.y,a=t.z;let s,c;return this.showPerspective?(s=i/a*(r-e),c=i/a*(o-n)):(s=r*(-i/this.camera.getArmLength()),c=o*(-i/this.camera.getArmLength())),new ml(this.currentXCenter+s*this.frame.canvas.clientWidth,this.currentYCenter-c*this.frame.canvas.clientWidth)},Vh.prototype._calcTranslations=function(t){for(let e=0;e<t.length;e++){const n=t[e];n.trans=this._convertPointToTranslation(n.point),n.screen=this._convertTranslationToScreen(n.trans);const i=this._convertPointToTranslation(n.bottom);n.dist=this.showPerspective?i.length():-i.z}ci(t).call(t,function(t,e){return e.dist-t.dist})},Vh.prototype._initializeRanges=function(){const t=this.dataGroup;this.xRange=t.xRange,this.yRange=t.yRange,this.zRange=t.zRange,this.valueRange=t.valueRange,this.xStep=t.xStep,this.yStep=t.yStep,this.zStep=t.zStep,this.xBarWidth=t.xBarWidth,this.yBarWidth=t.yBarWidth,this.colX=t.colX,this.colY=t.colY,this.colZ=t.colZ,this.colValue=t.colValue,this._setScale()},Vh.prototype.getDataPoints=function(t){const e=[];for(let n=0;n<t.length;n++){const i=new vl;i.x=t[n][this.colX]||0,i.y=t[n][this.colY]||0,i.z=t[n][this.colZ]||0,i.data=t[n],i.value=t[n][this.colValue]||0;const r={};r.point=i,r.bottom=new vl(i.x,i.y,this.zRange.min),r.trans=void 0,r.screen=void 0,e.push(r)}return e},Vh.prototype._getDataPoints=function(t){let e,n,i,r,o=[];if(this.style===Vh.STYLE.GRID||this.style===Vh.STYLE.SURFACE){const a=this.dataGroup.getDistinctValues(this.colX,t),s=this.dataGroup.getDistinctValues(this.colY,t);o=this.getDataPoints(t);const c=[];for(i=0;i<o.length;i++){r=o[i];const t=Bi(a).call(a,r.point.x),e=Bi(s).call(s,r.point.y);void 0===c[t]&&(c[t]=[]),c[t][e]=r}for(e=0;e<c.length;e++)for(n=0;n<c[e].length;n++)c[e][n]&&(c[e][n].pointRight=e<c.length-1?c[e+1][n]:void 0,c[e][n].pointTop=n<c[e].length-1?c[e][n+1]:void 0,c[e][n].pointCross=e<c.length-1&&n<c[e].length-1?c[e+1][n+1]:void 0)}else if(o=this.getDataPoints(t),this.style===Vh.STYLE.LINE)for(i=0;i<o.length;i++)i>0&&(o[i-1].pointNext=o[i]);return o},Vh.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.frame.filter=document.createElement("div"),ur(this.frame).style.position="absolute",ur(this.frame).style.bottom="0px",ur(this.frame).style.left="0px",ur(this.frame).style.width="100%",this.frame.appendChild(ur(this.frame));const t=this;this.frame.canvas.addEventListener("mousedown",function(e){t._onMouseDown(e)}),this.frame.canvas.addEventListener("touchstart",function(e){t._onTouchStart(e)}),this.frame.canvas.addEventListener("mousewheel",function(e){t._onWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t._onTooltip(e)}),this.frame.canvas.addEventListener("click",function(e){t._onClick(e)}),this.containerElement.appendChild(this.frame)},Vh.prototype._setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this._resizeCanvas()},Vh.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,ur(this.frame).style.width=this.frame.canvas.clientWidth-20+"px"},Vh.prototype.animationStart=function(){if(this.animationAutoStart&&this.dataGroup.dataFilter){if(!ur(this.frame)||!ur(this.frame).slider)throw new Error("No animation available");ur(this.frame).slider.play()}},Vh.prototype.animationStop=function(){ur(this.frame)&&ur(this.frame).slider&&ur(this.frame).slider.stop()},Vh.prototype._resizeCenter=function(){"%"===this.xCenter.charAt(this.xCenter.length-1)?this.currentXCenter=Mr(this.xCenter)/100*this.frame.canvas.clientWidth:this.currentXCenter=Mr(this.xCenter),"%"===this.yCenter.charAt(this.yCenter.length-1)?this.currentYCenter=Mr(this.yCenter)/100*(this.frame.canvas.clientHeight-ur(this.frame).clientHeight):this.currentYCenter=Mr(this.yCenter)},Vh.prototype.getCameraPosition=function(){const t=this.camera.getArmRotation();return t.distance=this.camera.getArmLength(),t},Vh.prototype._readData=function(t){this.dataPoints=this.dataGroup.initializeData(this,t,this.style),this._initializeRanges(),this._redrawFilter()},Vh.prototype.setData=function(t){null!=t&&(this._readData(t),this.redraw(),this.animationStart())},Vh.prototype.setOptions=function(t){if(void 0===t)return;!0===dl.validate(t,Wh)&&console.error("%cErrors have been found in the supplied options object.",pl),this.animationStop(),function(t,e){if(void 0!==t){if(void 0===e)throw new Error("No dst passed");if(void 0===Lh||Ch(Lh))throw new Error("DEFAULTS not set for module Settings");Mh(t,e,Th),Mh(t,e,Sh,"default"),Ph(t,e)}}(t,this),this.setPointDrawingMethod(),this._setSize(this.width,this.height),this.setAxisLabelMethod(),this.setData(this.dataGroup.getDataTable()),this.animationStart()},Vh.prototype.setPointDrawingMethod=function(){let t;switch(this.style){case Vh.STYLE.BAR:t=this._redrawBarGraphPoint;break;case Vh.STYLE.BARCOLOR:t=this._redrawBarColorGraphPoint;break;case Vh.STYLE.BARSIZE:t=this._redrawBarSizeGraphPoint;break;case Vh.STYLE.DOT:t=this._redrawDotGraphPoint;break;case Vh.STYLE.DOTLINE:t=this._redrawDotLineGraphPoint;break;case Vh.STYLE.DOTCOLOR:t=this._redrawDotColorGraphPoint;break;case Vh.STYLE.DOTSIZE:t=this._redrawDotSizeGraphPoint;break;case Vh.STYLE.SURFACE:t=this._redrawSurfaceGraphPoint;break;case Vh.STYLE.GRID:t=this._redrawGridGraphPoint;break;case Vh.STYLE.LINE:t=this._redrawLineGraphPoint;break;default:throw new Error("Can not determine point drawing method for graph style '"+this.style+"'")}this._pointDrawingMethod=t},Vh.prototype.setAxisLabelMethod=function(){this.rotateAxisLabels?(this._drawAxisLabelX=this.drawAxisLabelXRotate,this._drawAxisLabelY=this.drawAxisLabelYRotate,this._drawAxisLabelZ=this.drawAxisLabelZRotate):(this._drawAxisLabelX=this.drawAxisLabelX,this._drawAxisLabelY=this.drawAxisLabelY,this._drawAxisLabelZ=this.drawAxisLabelZ)},Vh.prototype.redraw=function(){if(void 0===this.dataPoints)throw new Error("Graph data not initialized");this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this._redrawDataGraph(),this._redrawInfo(),this._redrawLegend()},Vh.prototype._getContext=function(){const t=this.frame.canvas.getContext("2d");return t.lineJoin="round",t.lineCap="round",t},Vh.prototype._redrawClear=function(){const t=this.frame.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height)},Vh.prototype._dotSize=function(){return this.frame.clientWidth*this.dotSizeRatio},Vh.prototype._getLegendWidth=function(){let t;if(this.style===Vh.STYLE.DOTSIZE){t=this._dotSize()*this.dotSizeMaxFraction}else t=this.style===Vh.STYLE.BARSIZE?this.xBarWidth:20;return t},Vh.prototype._redrawLegend=function(){if(!0!==this.showLegend)return;if(this.style===Vh.STYLE.LINE||this.style===Vh.STYLE.BARSIZE)return;const t=this.style===Vh.STYLE.BARSIZE||this.style===Vh.STYLE.DOTSIZE,e=this.style===Vh.STYLE.DOTSIZE||this.style===Vh.STYLE.DOTCOLOR||this.style===Vh.STYLE.SURFACE||this.style===Vh.STYLE.BARCOLOR,n=Math.max(.25*this.frame.clientHeight,100),i=this.margin,r=this._getLegendWidth(),o=this.frame.clientWidth-this.margin,a=o-r,s=i+n,c=this._getContext();if(c.lineWidth=1,c.font="14px arial",!1===t){const t=0,e=n;let s;for(s=t;s<e;s++){const n=1-(s-t)/(e-t),r=this._colormap(n,1);c.strokeStyle=r,c.beginPath(),c.moveTo(a,i+s),c.lineTo(o,i+s),c.stroke()}c.strokeStyle=this.axisColor,c.strokeRect(a,i,r,n)}else{let t;this.style===Vh.STYLE.DOTSIZE?t=r*(this.dotSizeMinFraction/this.dotSizeMaxFraction):(this.style,Vh.STYLE.BARSIZE),c.strokeStyle=this.axisColor,c.fillStyle=Hr(this.dataColor),c.beginPath(),c.moveTo(a,i),c.lineTo(o,i),c.lineTo(a+t,s),c.lineTo(a,s),c.closePath(),Hr(c).call(c),c.stroke()}const u=e?this.valueRange.min:this.zRange.min,l=e?this.valueRange.max:this.zRange.max,h=new gl(u,l,(l-u)/5,!0);for(h.start(!0);!h.end();){const t=s-(h.getCurrent()-u)/(l-u)*n,e=new ml(a-5,t),i=new ml(a,t);this._line(c,e,i),c.textAlign="right",c.textBaseline="middle",c.fillStyle=this.axisColor,c.fillText(h.getCurrent(),a-10,t),h.next()}c.textAlign="right",c.textBaseline="top";const f=this.legendLabel;c.fillText(f,o,s+this.margin)},Vh.prototype._redrawFilter=function(){const t=this.dataGroup.dataFilter,e=ur(this.frame);if(e.innerHTML="",!t)return void(e.slider=void 0);const n=new yl(e,{visible:this.showAnimationControls});e.slider=n,e.style.padding="10px",n.setValues(ka(t)),n.setPlayInterval(this.animationInterval);const i=this;n.setOnChangeCallback(function(){const t=i.dataGroup.dataFilter,e=n.getIndex();t.selectValue(e),i.dataPoints=t._getDataPoints(),i.redraw()})},Vh.prototype._redrawSlider=function(){void 0!==ur(this.frame).slider&&ur(this.frame).slider.redraw()},Vh.prototype._redrawInfo=function(){const t=this.dataGroup.getInfo();if(void 0===t)return;const e=this._getContext();e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";const n=this.margin,i=this.margin;e.fillText(t,n,i)},Vh.prototype._line=function(t,e,n,i){void 0!==i&&(t.strokeStyle=i),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.stroke()},Vh.prototype.drawAxisLabelX=function(t,e,n,i,r){void 0===r&&(r=0);const o=this._convert3Dto2D(e);Math.cos(2*i)>0?(t.textAlign="center",t.textBaseline="top",o.y+=r):Math.sin(2*i)<0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(n,o.x,o.y)},Vh.prototype.drawAxisLabelY=function(t,e,n,i,r){void 0===r&&(r=0);const o=this._convert3Dto2D(e);Math.cos(2*i)<0?(t.textAlign="center",t.textBaseline="top",o.y+=r):Math.sin(2*i)>0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(n,o.x,o.y)},Vh.prototype.drawAxisLabelZ=function(t,e,n,i){void 0===i&&(i=0);const r=this._convert3Dto2D(e);t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,r.x-i,r.y)},Vh.prototype.drawAxisLabelXRotate=function(t,e,n,i,r){const o=this._convert3Dto2D(e);Math.cos(2*i)>0?(t.save(),t.translate(o.x,o.y),t.rotate(-Math.PI/2),t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,0,0),t.restore()):Math.sin(2*i)<0?(t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,o.x,o.y)):(t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,o.x,o.y))},Vh.prototype.drawAxisLabelYRotate=function(t,e,n,i,r){const o=this._convert3Dto2D(e);Math.cos(2*i)<0?(t.save(),t.translate(o.x,o.y),t.rotate(-Math.PI/2),t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,0,0),t.restore()):Math.sin(2*i)>0?(t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,o.x,o.y)):(t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,o.x,o.y))},Vh.prototype.drawAxisLabelZRotate=function(t,e,n,i){void 0===i&&(i=0);const r=this._convert3Dto2D(e);t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(n,r.x-i,r.y)},Vh.prototype._line3d=function(t,e,n,i){const r=this._convert3Dto2D(e),o=this._convert3Dto2D(n);this._line(t,r,o,i)},Vh.prototype._redrawAxis=function(){const t=this._getContext();let e,n,i,r,o,a,s,c,u,l,h;t.font=this.axisFontSize/this.camera.getArmLength()+"px "+this.axisFontType;const f=.025/this.scale.x,p=.025/this.scale.y,d=5/this.camera.getArmLength(),v=this.camera.getArmRotation().horizontal,m=new ml(Math.cos(v),Math.sin(v)),y=this.xRange,g=this.yRange,b=this.zRange;let x;for(t.lineWidth=1,r=void 0===this.defaultXStep,i=new gl(y.min,y.max,this.xStep,r),i.start(!0);!i.end();){const r=i.getCurrent();if(this.showGrid?(e=new vl(r,g.min,b.min),n=new vl(r,g.max,b.min),this._line3d(t,e,n,this.gridColor)):this.showXAxis&&(e=new vl(r,g.min,b.min),n=new vl(r,g.min+f,b.min),this._line3d(t,e,n,this.axisColor),e=new vl(r,g.max,b.min),n=new vl(r,g.max-f,b.min),this._line3d(t,e,n,this.axisColor)),this.showXAxis){s=m.x>0?g.min:g.max,x=new vl(r,s,b.min);const e="  "+this.xValueLabel(r)+"  ";this._drawAxisLabelX.call(this,t,x,e,v,d)}i.next()}for(t.lineWidth=1,r=void 0===this.defaultYStep,i=new gl(g.min,g.max,this.yStep,r),i.start(!0);!i.end();){const r=i.getCurrent();if(this.showGrid?(e=new vl(y.min,r,b.min),n=new vl(y.max,r,b.min),this._line3d(t,e,n,this.gridColor)):this.showYAxis&&(e=new vl(y.min,r,b.min),n=new vl(y.min+p,r,b.min),this._line3d(t,e,n,this.axisColor),e=new vl(y.max,r,b.min),n=new vl(y.max-p,r,b.min),this._line3d(t,e,n,this.axisColor)),this.showYAxis){a=m.y>0?y.min:y.max,x=new vl(a,r,b.min);const e="  "+this.yValueLabel(r)+"  ";this._drawAxisLabelY.call(this,t,x,e,v,d)}i.next()}if(this.showZAxis){for(t.lineWidth=1,r=void 0===this.defaultZStep,i=new gl(b.min,b.max,this.zStep,r),i.start(!0),a=m.x>0?y.min:y.max,s=m.y<0?g.min:g.max;!i.end();){const e=i.getCurrent(),r=new vl(a,s,e),o=this._convert3Dto2D(r);n=new ml(o.x-d,o.y),this._line(t,o,n,this.axisColor);const c=this.zValueLabel(e)+" ";this._drawAxisLabelZ.call(this,t,r,c,5),i.next()}t.lineWidth=1,e=new vl(a,s,b.min),n=new vl(a,s,b.max),this._line3d(t,e,n,this.axisColor)}if(this.showXAxis){let e,n;t.lineWidth=1,e=new vl(y.min,g.min,b.min),n=new vl(y.max,g.min,b.min),this._line3d(t,e,n,this.axisColor),e=new vl(y.min,g.max,b.min),n=new vl(y.max,g.max,b.min),this._line3d(t,e,n,this.axisColor)}this.showYAxis&&(t.lineWidth=1,e=new vl(y.min,g.min,b.min),n=new vl(y.min,g.max,b.min),this._line3d(t,e,n,this.axisColor),e=new vl(y.max,g.min,b.min),n=new vl(y.max,g.max,b.min),this._line3d(t,e,n,this.axisColor));const w=this.xLabel;w.length>0&&this.showXAxis&&(h=.1/this.scale.y,a=(y.max+3*y.min)/4,s=m.x>0?g.min-h:g.max+h,o=new vl(a,s,b.min),this.drawAxisLabelX(t,o,w,v));const _=this.yLabel;_.length>0&&this.showYAxis&&(l=.1/this.scale.x,a=m.y>0?y.min-l:y.max+l,s=(g.max+3*g.min)/4,o=new vl(a,s,b.min),this.drawAxisLabelY(t,o,_,v));const T=this.zLabel;T.length>0&&this.showZAxis&&(u=30,a=m.x>0?y.min:y.max,s=m.y<0?g.min:g.max,c=(b.max+3*b.min)/4,o=new vl(a,s,c),this.drawAxisLabelZ(t,o,T,30))},Vh.prototype._getStrokeWidth=function(t){return void 0!==t?this.showPerspective?1/-t.trans.z*this.dataColor.strokeWidth:-this.eye.z/this.camera.getArmLength()*this.dataColor.strokeWidth:this.dataColor.strokeWidth},Vh.prototype._redrawBar=function(t,e,n,i,r,o){let a;const s=this,c=e.point,u=this.zRange.min,l=[{point:new vl(c.x-n,c.y-i,c.z)},{point:new vl(c.x+n,c.y-i,c.z)},{point:new vl(c.x+n,c.y+i,c.z)},{point:new vl(c.x-n,c.y+i,c.z)}],h=[{point:new vl(c.x-n,c.y-i,u)},{point:new vl(c.x+n,c.y-i,u)},{point:new vl(c.x+n,c.y+i,u)},{point:new vl(c.x-n,c.y+i,u)}];Ha(l).call(l,function(t){t.screen=s._convert3Dto2D(t.point)}),Ha(h).call(h,function(t){t.screen=s._convert3Dto2D(t.point)});const f=[{corners:l,center:vl.avg(h[0].point,h[2].point)},{corners:[l[0],l[1],h[1],h[0]],center:vl.avg(h[1].point,h[0].point)},{corners:[l[1],l[2],h[2],h[1]],center:vl.avg(h[2].point,h[1].point)},{corners:[l[2],l[3],h[3],h[2]],center:vl.avg(h[3].point,h[2].point)},{corners:[l[3],l[0],h[0],h[3]],center:vl.avg(h[0].point,h[3].point)}];e.surfaces=f;for(let t=0;t<f.length;t++){a=f[t];const e=this._convertPointToTranslation(a.center);a.dist=this.showPerspective?e.length():-e.z}ci(f).call(f,function(t,e){const n=e.dist-t.dist;return n||(t.corners===l?1:e.corners===l?-1:0)}),t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=o,t.fillStyle=r;for(let e=2;e<f.length;e++)a=f[e],this._polygon(t,a.corners)},Vh.prototype._polygon=function(t,e,n,i){if(!(e.length<2)){void 0!==n&&(t.fillStyle=n),void 0!==i&&(t.strokeStyle=i),t.beginPath(),t.moveTo(e[0].screen.x,e[0].screen.y);for(let n=1;n<e.length;++n){const i=e[n];t.lineTo(i.screen.x,i.screen.y)}t.closePath(),Hr(t).call(t),t.stroke()}},Vh.prototype._drawCircle=function(t,e,n,i,r){const o=this._calcRadius(e,r);t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=i,t.fillStyle=n,t.beginPath(),t.arc(e.screen.x,e.screen.y,o,0,2*Math.PI,!0),Hr(t).call(t),t.stroke()},Vh.prototype._getColorsRegular=function(t){const e=(t.point.value-this.valueRange.min)*this.scale.value;return{fill:this._colormap(e,1),border:this._colormap(e,.8)}},Vh.prototype._getColorsColor=function(t){let e,n,i;if(t&&t.point&&t.point.data&&t.point.data.style&&(i=t.point.data.style),i&&"object"==typeof i&&Hr(i)&&i.stroke)return{fill:Hr(i),border:i.stroke};if("string"==typeof t.point.value)e=t.point.value,n=t.point.value;else{const i=(t.point.value-this.valueRange.min)*this.scale.value;e=this._colormap(i,1),n=this._colormap(i,.8)}return{fill:e,border:n}},Vh.prototype._getColorsSize=function(){return{fill:Hr(this.dataColor),border:this.dataColor.stroke}},Vh.prototype._colormap=function(t){let e,n,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=this.colormap;if(rs(a)){const r=a.length-1,o=Math.max(Math.floor(t*r),0),s=Math.min(o+1,r),c=t*r-o,u=a[o],l=a[s];e=u.r+c*(l.r-u.r),n=u.g+c*(l.g-u.g),i=u.b+c*(l.b-u.b)}else if("function"==typeof a)({r:e,g:n,b:i,a:r}=a(t));else{const r=240*(1-t);({r:e,g:n,b:i}=ul(r/360,1,1))}var s,c,u,l,h;return"number"!=typeof r||xs(r)?zs(s=zs(c="RGB(".concat(Math.round(e*o),", ")).call(c,Math.round(n*o),", ")).call(s,Math.round(i*o),")"):zs(u=zs(l=zs(h="RGBA(".concat(Math.round(e*o),", ")).call(h,Math.round(n*o),", ")).call(l,Math.round(i*o),", ")).call(u,r,")")},Vh.prototype._calcRadius=function(t,e){let n;return void 0===e&&(e=this._dotSize()),n=this.showPerspective?e/-t.trans.z:e*(-this.eye.z/this.camera.getArmLength()),n<0&&(n=0),n},Vh.prototype._redrawBarGraphPoint=function(t,e){const n=this.xBarWidth/2,i=this.yBarWidth/2,r=this._getColorsRegular(e);this._redrawBar(t,e,n,i,Hr(r),r.border)},Vh.prototype._redrawBarColorGraphPoint=function(t,e){const n=this.xBarWidth/2,i=this.yBarWidth/2,r=this._getColorsColor(e);this._redrawBar(t,e,n,i,Hr(r),r.border)},Vh.prototype._redrawBarSizeGraphPoint=function(t,e){const n=(e.point.value-this.valueRange.min)/this.valueRange.range(),i=this.xBarWidth/2*(.8*n+.2),r=this.yBarWidth/2*(.8*n+.2),o=this._getColorsSize();this._redrawBar(t,e,i,r,Hr(o),o.border)},Vh.prototype._redrawDotGraphPoint=function(t,e){const n=this._getColorsRegular(e);this._drawCircle(t,e,Hr(n),n.border)},Vh.prototype._redrawDotLineGraphPoint=function(t,e){const n=this._convert3Dto2D(e.bottom);t.lineWidth=1,this._line(t,n,e.screen,this.gridColor),this._redrawDotGraphPoint(t,e)},Vh.prototype._redrawDotColorGraphPoint=function(t,e){const n=this._getColorsColor(e);this._drawCircle(t,e,Hr(n),n.border)},Vh.prototype._redrawDotSizeGraphPoint=function(t,e){const n=this._dotSize(),i=(e.point.value-this.valueRange.min)/this.valueRange.range(),r=n*this.dotSizeMinFraction,o=r+(n*this.dotSizeMaxFraction-r)*i,a=this._getColorsSize();this._drawCircle(t,e,Hr(a),a.border,o)},Vh.prototype._redrawSurfaceGraphPoint=function(t,e){const n=e.pointRight,i=e.pointTop,r=e.pointCross;if(void 0===e||void 0===n||void 0===i||void 0===r)return;let o,a,s,c=!0;if(this.showGrayBottom||this.showShadow){const t=vl.subtract(r.trans,e.trans),o=vl.subtract(i.trans,n.trans),a=vl.crossProduct(t,o);if(this.showPerspective){const t=vl.avg(vl.avg(e.trans,r.trans),vl.avg(n.trans,i.trans));s=-vl.dotProduct(a.normalize(),t.normalize())}else s=a.z/a.length();c=s>0}if(c||!this.showGrayBottom){const t=((e.point.value+n.point.value+i.point.value+r.point.value)/4-this.valueRange.min)*this.scale.value,a=this.showShadow?(1+s)/2:1;o=this._colormap(t,a)}else o="gray";a=this.showSurfaceGrid?this.axisColor:o,t.lineWidth=this._getStrokeWidth(e);const u=[e,n,r,i];this._polygon(t,u,o,a)},Vh.prototype._drawGridLine=function(t,e,n){if(void 0===e||void 0===n)return;const i=((e.point.value+n.point.value)/2-this.valueRange.min)*this.scale.value;t.lineWidth=2*this._getStrokeWidth(e),t.strokeStyle=this._colormap(i,1),this._line(t,e.screen,n.screen)},Vh.prototype._redrawGridGraphPoint=function(t,e){this._drawGridLine(t,e,e.pointRight),this._drawGridLine(t,e,e.pointTop)},Vh.prototype._redrawLineGraphPoint=function(t,e){void 0!==e.pointNext&&(t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=this.dataColor.stroke,this._line(t,e.screen,e.pointNext.screen))},Vh.prototype._redrawDataGraph=function(){const t=this._getContext();let e;if(!(void 0===this.dataPoints||this.dataPoints.length<=0))for(this._calcTranslations(this.dataPoints),e=0;e<this.dataPoints.length;e++){const n=this.dataPoints[e];this._pointDrawingMethod.call(this,t,n)}},Vh.prototype._storeMousePosition=function(t){this.startMouseX=Uh(t),this.startMouseY=Zh(t),this._startCameraOffset=this.camera.getOffset()},Vh.prototype._onMouseDown=function(t){if(t=t||window.event,this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1===t.which:1===t.button,!this.leftButtonDown&&!this.touchDown)return;this._storeMousePosition(t),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";const e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},document.addEventListener("mousemove",e.onmousemove),document.addEventListener("mouseup",e.onmouseup),cl(t)},Vh.prototype._onMouseMove=function(t){this.moving=!0,t=t||window.event;const e=Mr(Uh(t))-this.startMouseX,n=Mr(Zh(t))-this.startMouseY;if(t&&!0===t.ctrlKey){const i=.5*this.frame.clientWidth,r=.5*this.frame.clientHeight,o=(this._startCameraOffset.x||0)-e/i*this.camera.armLength*.8,a=(this._startCameraOffset.y||0)+n/r*this.camera.armLength*.8;this.camera.setOffset(o,a),this._storeMousePosition(t)}else{let t=this.startArmRotation.horizontal+e/200,i=this.startArmRotation.vertical+n/200;const r=4,o=Math.sin(r/360*2*Math.PI);Math.abs(Math.sin(t))<o&&(t=Math.round(t/Math.PI)*Math.PI-.001),Math.abs(Math.cos(t))<o&&(t=(Math.round(t/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(i))<o&&(i=Math.round(i/Math.PI)*Math.PI),Math.abs(Math.cos(i))<o&&(i=(Math.round(i/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(t,i)}this.redraw();const i=this.getCameraPosition();this.emit("cameraPositionChange",i),cl(t)},Vh.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,document.removeEventListener("mousemove",this.onmousemove),document.removeEventListener("mouseup",this.onmouseup),cl(t)},Vh.prototype._onClick=function(t){if(this.onclick_callback||this.hasListeners("click")){if(this.moving)this.moving=!1;else{const e=this.frame.getBoundingClientRect(),n=Uh(t)-e.left,i=Zh(t)-e.top,r=this._dataPointFromXY(n,i);r&&(this.onclick_callback&&this.onclick_callback(r.point.data),this.emit("click",r.point.data))}cl(t)}},Vh.prototype._onTooltip=function(t){const e=this.tooltipDelay,n=this.frame.getBoundingClientRect(),i=Uh(t)-n.left,r=Zh(t)-n.top;if(this.showTooltip)if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)this._hideTooltip();else if(this.tooltip&&this.tooltip.dataPoint){const t=this._dataPointFromXY(i,r);t!==this.tooltip.dataPoint&&(t?this._showTooltip(t):this._hideTooltip())}else{const t=this;this.tooltipTimeout=oc(function(){t.tooltipTimeout=null;const e=t._dataPointFromXY(i,r);e&&t._showTooltip(e)},e)}},Vh.prototype._onTouchStart=function(t){this.touchDown=!0;const e=this;this.ontouchmove=function(t){e._onTouchMove(t)},this.ontouchend=function(t){e._onTouchEnd(t)},document.addEventListener("touchmove",e.ontouchmove),document.addEventListener("touchend",e.ontouchend),this._onMouseDown(t)},Vh.prototype._onTouchMove=function(t){this._onMouseMove(t)},Vh.prototype._onTouchEnd=function(t){this.touchDown=!1,document.removeEventListener("touchmove",this.ontouchmove),document.removeEventListener("touchend",this.ontouchend),this._onMouseUp(t)},Vh.prototype._onWheel=function(t){if(t||(t=window.event),this.zoomable&&(!this.ctrlToZoom||t.ctrlKey)){let e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){const t=this.camera.getArmLength()*(1-e/10);this.camera.setArmLength(t),this.redraw(),this._hideTooltip()}const n=this.getCameraPosition();this.emit("cameraPositionChange",n),cl(t)}},Vh.prototype._insideTriangle=function(t,e){const n=e[0],i=e[1],r=e[2];function o(t){return t>0?1:t<0?-1:0}const a=o((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x)),s=o((r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x)),c=o((n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x));return!(0!=a&&0!=s&&a!=s||0!=s&&0!=c&&s!=c||0!=a&&0!=c&&a!=c)},Vh.prototype._dataPointFromXY=function(t,e){const n=new ml(t,e);let i,r=null,o=null,a=null;if(this.style===Vh.STYLE.BAR||this.style===Vh.STYLE.BARCOLOR||this.style===Vh.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){r=this.dataPoints[i];const t=r.surfaces;if(t)for(let e=t.length-1;e>=0;e--){const i=t[e].corners,o=[i[0].screen,i[1].screen,i[2].screen],a=[i[2].screen,i[3].screen,i[0].screen];if(this._insideTriangle(n,o)||this._insideTriangle(n,a))return r}}else for(i=0;i<this.dataPoints.length;i++){r=this.dataPoints[i];const n=r.screen;if(n){const i=Math.abs(t-n.x),s=Math.abs(e-n.y),c=Math.sqrt(i*i+s*s);(null===a||c<a)&&c<100&&(a=c,o=r)}}return o},Vh.prototype.hasBars=function(t){return t==Vh.STYLE.BAR||t==Vh.STYLE.BARCOLOR||t==Vh.STYLE.BARSIZE},Vh.prototype._showTooltip=function(t){let e,n,i;this.tooltip?(e=this.tooltip.dom.content,n=this.tooltip.dom.line,i=this.tooltip.dom.dot):(e=document.createElement("div"),pc(e.style,{},this.tooltipStyle.content),e.style.position="absolute",n=document.createElement("div"),pc(n.style,{},this.tooltipStyle.line),n.style.position="absolute",i=document.createElement("div"),pc(i.style,{},this.tooltipStyle.dot),i.style.position="absolute",this.tooltip={dataPoint:null,dom:{content:e,line:n,dot:i}}),this._hideTooltip(),this.tooltip.dataPoint=t,"function"==typeof this.showTooltip?e.innerHTML=this.showTooltip(t.point):e.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+t.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+t.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+t.point.z+"</td></tr></table>",e.style.left="0",e.style.top="0",this.frame.appendChild(e),this.frame.appendChild(n),this.frame.appendChild(i);const r=e.offsetWidth,o=e.offsetHeight,a=n.offsetHeight,s=i.offsetWidth,c=i.offsetHeight;let u=t.screen.x-r/2;u=Math.min(Math.max(u,10),this.frame.clientWidth-10-r),n.style.left=t.screen.x+"px",n.style.top=t.screen.y-a+"px",e.style.left=u+"px",e.style.top=t.screen.y-a-o+"px",i.style.left=t.screen.x-s/2+"px",i.style.top=t.screen.y-c/2+"px"},Vh.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(const t in this.tooltip.dom)if(Object.prototype.hasOwnProperty.call(this.tooltip.dom,t)){const e=this.tooltip.dom[t];e&&e.parentNode&&e.parentNode.removeChild(e)}}},Vh.prototype.setCameraPosition=function(t){Dh(t,this),this.redraw()},Vh.prototype.setSize=function(t,e){this._setSize(t,e),this.redraw()};export{Vh as Graph3d,xh as Graph3dCamera,Yh as Graph3dFilter,ml as Graph3dPoint2d,vl as Graph3dPoint3d,yl as Graph3dSlider,gl as Graph3dStepNumber};
//# sourceMappingURL=vis-graph3d.min.mjs.map
